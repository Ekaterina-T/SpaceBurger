{"version":3,"sources":["components/modal-overlay/modal-overlay.module.css","components/placeholder/placeholder.module.css","pages/order-info.module.css","reportWebVitals.ts","services/actionTypes.ts","services/ingredients/reducer.ts","services/cart/reducer.ts","services/user/reducer.ts","utils/constants.ts","services/orders/reducer.ts","services/rootReducer.ts","utils/cookie.ts","services/middleware/socketMiddleware.ts","services/store.ts","services/types/index.ts","components/app-header/nav-item/nav-item.tsx","components/app-header/nav-list/nav-list.tsx","components/app-header/app-header.tsx","components/route-auth-users/route-auth-users.tsx","components/route-unauth-users/route-unauth-users.tsx","components/burger-ingredients/ingredient-group/ingredient-group.tsx","services/cart/CartActions.ts","services/cart/actions.ts","components/burger-ingredients/ingredient/ingredient.tsx","components/burger-ingredients/tab-menu/tab-menu.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/ingredient-details/ingredient-details.tsx","components/burger-ingredients/burger-ingredients.tsx","components/order-details/order-details-icon.tsx","components/order-details/order-details.tsx","components/burger-constructor/burger-constructor-total/burger-constructor-total.tsx","components/placeholder/placeholder.tsx","components/burger-constructor/burger-constructor-item/burger-constructor-item.tsx","components/burger-constructor/burger-constructor.tsx","pages/main.tsx","components/app-form/app-form.tsx","utils/token.ts","services/user/actions.ts","pages/login.tsx","pages/register.tsx","pages/forgot-password.tsx","pages/reset-password.tsx","components/profile-settings/profile-settings.tsx","components/price/price.tsx","components/ingredient-icon-round/ingredient-icon-round.tsx","utils/vocabulary/ru.ts","utils/date-formatter/date-formatter.ts","utils/order.ts","components/order-card/order-card.tsx","components/feed-list/feed-list.tsx","pages/profile.tsx","pages/not-found.tsx","components/feed-overview/orderid-list/order-id-list.tsx","components/feed-overview/feed-info/feed-info.tsx","components/feed-overview/feed-overview.tsx","pages/feed.tsx","pages/order-info.tsx","utils/throttle.ts","hooks/useIdleTimeout.ts","components/app/app.tsx","services/ingredients/actions.ts","index.tsx","components/order-card/order-card.module.css","components/ingredient-details/ingredient-details.module.css","components/feed-overview/feed-overview.module.css","components/burger-ingredients/ingredient/ingredient.module.css","components/order-details/order-details.module.css","components/app-header/nav-item/nav-item.module.css","components/feed-overview/orderid-list/orderid-list.module.css","components/burger-ingredients/burger-ingredients.module.css","components/burger-ingredients/ingredient-group/ingredient-group.module.css","components/burger-constructor/burger-constructor.module.css","components/burger-constructor/burger-constructor-total/burger-constructor-total.module.css","components/app-form/app-form.module.css","components/feed-list/feed-list.module.css","pages/profile.module.css","pages/feed.module.css","pages/index.module.css","components/app-header/app-header.module.css","components/app-header/nav-list/nav-list.module.css","components/modal/modal.module.css","components/burger-constructor/burger-constructor-item/burger-constructor-item.module.css","components/profile-settings/profile-settings.module.css","components/price/price.module.css","components/ingredient-icon-round/ingredient-icon-round.module.css","components/feed-overview/feed-info/feed-info.module.css"],"names":["module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ActionTypes","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","SET_ACTIVE_INGREDIENT","SHOW_INGREDIENT_DETAILS","UPDATE_CART","CREATE_NEW_ORDER_REQUEST","CREATE_NEW_ORDER_SUCCESS","CREATE_NEW_ORDER_FAILED","SHOW_ORDER_DETAILS","CLOSE_ORDER","SORT_FILLINGS_ORDER","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILED","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILED","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILED","PASSWORD_RESET_CODE_REQUEST","PASSWORD_RESET_CODE_SUCCESS","PASSWORD_RESET_CODE_FAILED","PASSWORD_RESET_REQUEST","PASSWORD_RESET_SUCCESS","PASSWORD_RESET_FAILED","USER_REFRESH_SUCCESS","wsAllOrders","wsInit","onOpen","onError","onClose","onGetMessage","wsSendMessage","wsUserOrders","initialState","ingredientsLoad","ingredientsLoadSuccess","ingredientsLoadFailed","items","showIngredientDetails","activeIngredient","bun","fillings","createOrderInProgress","createOrderSuccess","createOrderFailed","showOrderDetails","orderDetails","registerRequest","registerSuccess","registerFailed","loginRequest","loginSuccess","loginFailed","logoutRequest","logoutSuccess","logoutFailed","passwordResetCodeRequest","passwordResetCodeSuccess","passwordResetCodeFailed","passwordResetRequest","passwordResetSuccess","passwordResetFailed","refreshSuccess","accessToken","accessTokenTimeStamp","refreshToken","ingredientGroups","type","name","domain","dataUrl","orderUrl","authEndpoints","registerUrl","authUrl","logoutUrl","tokenUrl","userUrl","ws","allOrdersWS","personalOrdersWS","socketType","allOrders","personalOrders","passwordResetUrl","resetUrl","accessTokenName","refreshTokenName","Object","values","forEach","socket","wsConnected","error","messages","data","state","action","socketName","payload","JSON","parse","rootReducer","combineReducers","ingredients","value","cart","updatedCart","user","timeStamp","email","orders","getCookie","matches","document","cookie","match","RegExp","replace","decodeURIComponent","getCookieValue","indexOf","split","setCookie","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","keys","propName","propValue","socketMiddleware","store","next","dispatch","WebSocket","createSocket","wsActions","onopen","event","onerror","onmessage","onclose","message","send","stringify","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","useAppDispatch","useDispatch","useAppSelector","useSelector","NavItem","id","title","icon","cssClass","subitems","to","className","styles","nav_item","isActive","isExact","nav_link","activeClassName","link_text","NavList","main_nav","nested_nav","map","item","AppHeader","menuItems","header","nav","RouteForAuthorizedUsers","children","rest","render","location","pathname","target","getNextPage","result","RouteForUnauthorizedUsers","IngredientGroup","group","CartActions","ingredientID","newIngredient","filter","_id","key","getIngredientKey","ingredient","now","join","addIngredientToCart","positionIndex","getState","createNewIngredient","length","push","updatedFillings","splice","Ingredient","openModal","useDrag","dragRef","ingredientCount","React","useMemo","count","image","price","card","onClick","e","nodeName","ref","size","src","alt","price_num","add_btn","stopPropagation","TabMenu","burgerIngredientsEl","currentTab","updateCurrentTab","scrollIntoSection","tabValue","section","current","querySelector","scrollIntoView","behavior","style","display","ingredientGroup","active","ModalOverlay","backdrop","Modal","useState","activeBeforeModal","setActiveBeforeModal","modalControls","setModalControls","modalComponent","useRef","useEffect","activeElement","focus","modalRoot","ReactDOM","createPortal","modal","tabIndex","onKeyDown","code","shiftKey","preventDefault","addTabTrap","IngredientDetails","useParams","activeIngredientFromStore","find","calories","proteins","fat","carbohydrates","image_large","nutritionItems","details_section","details_header","details_title","nutrition_info","nutrition_item","nutrition_title","nutrition_val","BurgerIngredients","useLocation","history","useHistory","setCurrentTab","getIngredientsFrom","background","ingredient_groups","onScroll","scrollableArea","scrollableAreaTop","getBoundingClientRect","y","visibleGroup","Array","prototype","slice","call","querySelectorAll","sectionIndex","allSections","getAttribute","goBack","OrderDetailsIcon","width","height","viewBox","fill","xmlns","fillRule","clipRule","fillOpacity","cx","cy","r","gradientUnits","gradientTransform","stopColor","stopOpacity","offset","OrderDetails","notesMain","success","notesSec","info_section","orderId","order","number","orderId_note","common_notes_main","common_notes_sec","BurgerConstructorTotal","calcTotal","reduce","acc","filling","constructor_total","button_wrapper","prevCart","fetch","method","headers","Authorization","body","res","ok","json","Promise","reject","catch","info_important","Placeholder","placeholder","BurgerConstructorItem","index","text","thumbnail","isLocked","refWrapper","refIngredient","isHoverOver","monitor","isOver","draggedItem","getItem","draggedIndex","swapFillings","oldItemIndex","newItemIndex","dragIndex","hoverIndex","newFillings","itemToMove","useDrop","accept","drop","getItemType","isDragUp","addNewFilling","collect","isDown","wrapperRect","dropTargetRect","dragCursorPos","getClientOffset","top","bottom","Math","abs","isDraggingDown","isDragDown","isDragging","drag","removeIngredient","ingredientKey","removedIngredientIndex","findIndex","removeIngredientFromCart","opacity","burgerIngredient","cursor","dragIcon","handleClose","BurgerConstructor","cartHasItems","setCartHasItems","isBunAdded","setIsBunAdded","isBun","dropTarget","fillingsItems","constructor_area","main_area","scrollable_area","MainPage","DndProvider","backend","HTML5Backend","AppForm","onSubmit","additionalStyles","getFormStyles","defaultStyles","centeredForm","concat","serverRequest","url","options","console","log","getProfileSettings","updateProfileSettings","updatedUserSettings","authorization","setToken","localStorage","setItem","logout","token","Error","removeItem","runServerRequest","requestFunction","requestFunctionParams","status","tokenRes","repeatReqRes","LoginPage","password","credentials","setCredentials","onInputChange","prevVal","input","onChange","button","helpRedirect","link","RegisterPage","registerInfo","setRegisterInfo","elem","ForgotPasswordPage","setEmail","requestPasswordResetCode","ResetPasswordPage","verificationToken","resetData","setResetData","PASSWORD_PLACEHOLDER","ProfileSettings","setUser","updateField","profileStyles","buttonsArea","updatedFields","prevState","buttonSeparator","Price","IngredientIconRound","image_mobile","customStyle","ingredientContainer","ingredientImg","translationsRU","today","yesterday","lessThanFiveDaysAgo","daysAgo","MILLISECONDS_IN_MINUTE","DateFormatter","getDate","dateValue","date","minutes","getMinutes","getHours","getTZ","offsetInHours","getTimezoneOffset","getDaysDiff","cleanDate","setHours","cleanNow","diffInDays","getMonth","getFullYear","getRelativeFormat","formatOrderNumber","num","String","leadingZeroCount","prefix","OrderCard","updatedAt","ingredientsData","numOfIngredientsInOrder","images","left","zIndex","hiddenIngredientsReplacement","sum","topInfo","timestamp","bottomInfo","FeedList","owner","showOrderInfo","setShowOrderInfo","activeOrder","setActiveOrder","useRouteMatch","fallbackMsg","orders__profile","ProfilePage","profileMenuItems","label","infoText","onClickHandler","currentMenuItem","profileNav","exact","profileNavItem","profileInfo","path","NotFoundPage","OrderIDList","orderList","listTitle","listItem","FeedInfo","FeedOverview","total","totalToday","readyOrders","inProgressOrders","overview","content","contentRow","contentRow__item","FeedPage","page","contentArea","orderStatusTranslations","done","inprogress","cancelled","OrderInfoPage","undefined","cardInModal","contentTitle","ingredientsInfo","orderInfo","ingredientsInOrder","ingredientCounts","counts","ingredientInOrder","position","ingredientInOrderName","getOrderContent","footer","throttle","cb","lastCall","interval","args","Number","useIdleTimeout","timeout","setIsActive","timers","eventHandler","clearTimeout","setTimeout","addEventListener","App","isUserActive","statusText","StrictMode","basename","getElementById"],"mappings":"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","file":"static/js/main.b910c276.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"modal-overlay_backdrop__23Z-A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"placeholder\":\"placeholder_placeholder__J4XC9 m-10 p-10 text text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"order-info_card__3ag5A\",\"cardInModal\":\"order-info_cardInModal__3Niw8 order-info_card__3ag5A p-10\",\"id\":\"order-info_id__18GLv text text_type_main-default\",\"title\":\"order-info_title__31rIg text text_type_main-medium pt-10 pb-3\",\"status\":\"order-info_status__2hGDB text text_type_main-default\",\"status_done\":\"order-info_status_done__1feBs order-info_status__2hGDB text text_type_main-default\",\"status_cancelled\":\"order-info_status_cancelled__18k6U order-info_status__2hGDB text text_type_main-default\",\"content\":\"order-info_content__1NnUA pt-15 pb-10\",\"contentTitle\":\"order-info_contentTitle__3j9GY text text_type_main-medium pb-6\",\"ingredients\":\"order-info_ingredients__10LkP pr-6\",\"ingredientInOrder\":\"order-info_ingredientInOrder__uPL88 pb-4\",\"ingredientInOrderName\":\"order-info_ingredientInOrderName__2UDt6 text text_type_main-default pl-4 pr-4\",\"footer\":\"order-info_footer__CXlz6\",\"timestamp\":\"order-info_timestamp__3_gc0 text text_type_main-default\"};","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({\r\n      getCLS, getFID, getFCP, getLCP, getTTFB,\r\n    }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","export type TWSAllOrders = {\r\n  wsInit: 'WS_CONNECTION_ALL_ORDERS_START';\r\n  onOpen: 'WS_CONNECTION_ALL_ORDERS_SUCCESS';\r\n  onError: 'WS_CONNECTION_ALL_ORDERS_ERROR';\r\n  onClose: 'WS_CONNECTION_ALL_ORDERS_CLOSED';\r\n  onGetMessage: 'WS_ALL_ORDERS_GET_MESSAGE';\r\n  wsSendMessage: 'WS_ALL_ORDERS_SEND_MESSAGE';\r\n};\r\n\r\nexport type TWSUserOrders = {\r\n  wsInit: 'WS_CONNECTION_USER_ORDERS_START';\r\n  onOpen: 'WS_CONNECTION_USER_ORDERS_SUCCESS';\r\n  onError: 'WS_CONNECTION_USER_ORDERS_ERROR';\r\n  onClose: 'WS_CONNECTION_USER_ORDERS_CLOSED';\r\n  onGetMessage: 'WS_USER_ORDERS_GET_MESSAGE';\r\n  wsSendMessage: 'WS_USER_ORDERS_SEND_MESSAGE';\r\n};\r\n\r\nexport type TActionTypes = {\r\n\r\n  // saved all actions in one file - easy to import and use\r\n  // however not sure it's good, I incline ActionTypes should be split by stores as well\r\n  GET_INGREDIENTS_REQUEST: 'GET_INGREDIENTS_REQUEST';\r\n  GET_INGREDIENTS_SUCCESS: 'GET_INGREDIENTS_SUCCESS';\r\n  GET_INGREDIENTS_FAILED: 'GET_INGREDIENTS_FAILED';\r\n  SET_ACTIVE_INGREDIENT: 'SET_ACTIVE_INGREDIENT';\r\n  SHOW_INGREDIENT_DETAILS: 'SHOW_INGREDIENT_DETAILS';\r\n\r\n  UPDATE_CART: 'UPDATE_CART';\r\n\r\n  CREATE_NEW_ORDER_REQUEST: 'CREATE_NEW_ORDER_REQUEST';\r\n  CREATE_NEW_ORDER_SUCCESS: 'CREATE_NEW_ORDER_SUCCESS';\r\n  CREATE_NEW_ORDER_FAILED: 'CREATE_NEW_ORDER_FAILED';\r\n  SHOW_ORDER_DETAILS: 'SHOW_ORDER_DETAILS';\r\n  CLOSE_ORDER: 'CLOSE_ORDER';\r\n  SORT_FILLINGS_ORDER: 'SORT_FILLINGS_ORDER';\r\n\r\n  REGISTER_REQUEST: 'REGISTER_REQUEST';\r\n  REGISTER_SUCCESS: 'REGISTER_SUCCESS';\r\n  REGISTER_FAILED: 'REGISTER_FAILED';\r\n\r\n  LOGIN_REQUEST: 'LOGIN_REQUEST';\r\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS';\r\n  LOGIN_FAILED: 'LOGIN_FAILED';\r\n\r\n  LOGOUT_REQUEST: 'LOGOUT_REQUEST';\r\n  LOGOUT_SUCCESS: 'LOGOUT_SUCCESS';\r\n  LOGOUT_FAILED: 'LOGOUT_FAILED';\r\n\r\n  PASSWORD_RESET_CODE_REQUEST: 'PASSWORD_RESET_CODE_REQUEST';\r\n  PASSWORD_RESET_CODE_SUCCESS: 'PASSWORD_RESET_CODE_SUCCESS';\r\n  PASSWORD_RESET_CODE_FAILED: 'PASSWORD_RESET_CODE_FAILED';\r\n\r\n  PASSWORD_RESET_REQUEST: 'PASSWORD_RESET_REQUEST';\r\n  PASSWORD_RESET_SUCCESS: 'PASSWORD_RESET_SUCCESS';\r\n  PASSWORD_RESET_FAILED: 'PASSWORD_RESET_FAILED';\r\n\r\n  USER_REFRESH_SUCCESS: 'USER_REFRESH_SUCCESS';\r\n\r\n  wsAllOrders: TWSAllOrders;\r\n  wsUserOrders: TWSUserOrders;\r\n\r\n};\r\n\r\nexport const ActionTypes : TActionTypes = {\r\n\r\n  // saved all actions in one file - easy to import and use\r\n  // however not sure it's good, I incline ActionTypes should be split by stores as well\r\n  GET_INGREDIENTS_REQUEST: 'GET_INGREDIENTS_REQUEST',\r\n  GET_INGREDIENTS_SUCCESS: 'GET_INGREDIENTS_SUCCESS',\r\n  GET_INGREDIENTS_FAILED: 'GET_INGREDIENTS_FAILED',\r\n  SET_ACTIVE_INGREDIENT: 'SET_ACTIVE_INGREDIENT',\r\n  SHOW_INGREDIENT_DETAILS: 'SHOW_INGREDIENT_DETAILS',\r\n\r\n  UPDATE_CART: 'UPDATE_CART',\r\n  CREATE_NEW_ORDER_REQUEST: 'CREATE_NEW_ORDER_REQUEST',\r\n  CREATE_NEW_ORDER_SUCCESS: 'CREATE_NEW_ORDER_SUCCESS',\r\n  CREATE_NEW_ORDER_FAILED: 'CREATE_NEW_ORDER_FAILED',\r\n  SHOW_ORDER_DETAILS: 'SHOW_ORDER_DETAILS',\r\n  CLOSE_ORDER: 'CLOSE_ORDER',\r\n\r\n  SORT_FILLINGS_ORDER: 'SORT_FILLINGS_ORDER',\r\n\r\n  REGISTER_REQUEST: 'REGISTER_REQUEST',\r\n  REGISTER_SUCCESS: 'REGISTER_SUCCESS',\r\n  REGISTER_FAILED: 'REGISTER_FAILED',\r\n\r\n  LOGIN_REQUEST: 'LOGIN_REQUEST',\r\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\r\n  LOGIN_FAILED: 'LOGIN_FAILED',\r\n\r\n  LOGOUT_REQUEST: 'LOGOUT_REQUEST',\r\n  LOGOUT_SUCCESS: 'LOGOUT_SUCCESS',\r\n  LOGOUT_FAILED: 'LOGOUT_FAILED',\r\n\r\n  PASSWORD_RESET_CODE_REQUEST: 'PASSWORD_RESET_CODE_REQUEST',\r\n  PASSWORD_RESET_CODE_SUCCESS: 'PASSWORD_RESET_CODE_SUCCESS',\r\n  PASSWORD_RESET_CODE_FAILED: 'PASSWORD_RESET_CODE_FAILED',\r\n\r\n  PASSWORD_RESET_REQUEST: 'PASSWORD_RESET_REQUEST',\r\n  PASSWORD_RESET_SUCCESS: 'PASSWORD_RESET_SUCCESS',\r\n  PASSWORD_RESET_FAILED: 'PASSWORD_RESET_FAILED',\r\n\r\n  USER_REFRESH_SUCCESS: 'USER_REFRESH_SUCCESS',\r\n\r\n  wsAllOrders: {\r\n    wsInit: 'WS_CONNECTION_ALL_ORDERS_START',\r\n    onOpen: 'WS_CONNECTION_ALL_ORDERS_SUCCESS',\r\n    onError: 'WS_CONNECTION_ALL_ORDERS_ERROR',\r\n    onClose: 'WS_CONNECTION_ALL_ORDERS_CLOSED',\r\n    onGetMessage: 'WS_ALL_ORDERS_GET_MESSAGE',\r\n    wsSendMessage: 'WS_ALL_ORDERS_SEND_MESSAGE',\r\n  },\r\n\r\n  wsUserOrders: {\r\n    wsInit: 'WS_CONNECTION_USER_ORDERS_START',\r\n    onOpen: 'WS_CONNECTION_USER_ORDERS_SUCCESS',\r\n    onError: 'WS_CONNECTION_USER_ORDERS_ERROR',\r\n    onClose: 'WS_CONNECTION_USER_ORDERS_CLOSED',\r\n    onGetMessage: 'WS_USER_ORDERS_GET_MESSAGE',\r\n    wsSendMessage: 'WS_USER_ORDERS_SEND_MESSAGE',\r\n  },\r\n\r\n};\r\n","/* eslint-disable import/no-cycle */\r\nimport { ActionTypes } from '../actionTypes';\r\nimport { TIngredientActions } from './actions';\r\nimport { TIngredient } from '../types';\r\n\r\nexport type TIngredientState = {\r\n  ingredientsLoad: boolean,\r\n  ingredientsLoadSuccess: boolean,\r\n  ingredientsLoadFailed: boolean,\r\n  items: Array<TIngredient>,\r\n\r\n  showIngredientDetails: boolean,\r\n  activeIngredient: TIngredient | null,\r\n};\r\n\r\nconst initialState: TIngredientState = {\r\n  ingredientsLoad: false,\r\n  ingredientsLoadSuccess: false,\r\n  ingredientsLoadFailed: false,\r\n  items: [],\r\n\r\n  showIngredientDetails: false,\r\n  activeIngredient: null,\r\n};\r\n\r\nexport const ingredients = (state = initialState, action: TIngredientActions): TIngredientState => {\r\n  switch (action.type) {\r\n    case ActionTypes.GET_INGREDIENTS_REQUEST:\r\n      return {\r\n        ...state,\r\n        ingredientsLoad: true,\r\n      };\r\n\r\n    case ActionTypes.GET_INGREDIENTS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        ingredientsLoad: false,\r\n        ingredientsLoadSuccess: true,\r\n        items: action.data,\r\n      };\r\n\r\n    case ActionTypes.GET_INGREDIENTS_FAILED:\r\n      return {\r\n        ...state,\r\n        ingredientsLoad: false,\r\n        ingredientsLoadFailed: true,\r\n      };\r\n\r\n    case ActionTypes.SHOW_INGREDIENT_DETAILS:\r\n      return {\r\n        ...state,\r\n        showIngredientDetails: action.value,\r\n      };\r\n\r\n    case ActionTypes.SET_ACTIVE_INGREDIENT:\r\n      return {\r\n        ...state,\r\n        activeIngredient: action.value,\r\n      };\r\n\r\n    default: return state;\r\n  }\r\n};\r\n","/* eslint-disable import/no-cycle */\r\nimport { ActionTypes } from '../actionTypes';\r\nimport { TIngredient, TOrderDetails } from '../types';\r\nimport { TCartActions } from './actions';\r\n\r\nexport type TCartState = {\r\n  bun: TIngredient | null,\r\n  fillings: Array<TIngredient>,\r\n  createOrderInProgress?: boolean;\r\n  createOrderSuccess?: boolean;\r\n  createOrderFailed?: boolean;\r\n  showOrderDetails?: boolean;\r\n  orderDetails?: TOrderDetails | null;\r\n};\r\n\r\nconst initialState: TCartState = {\r\n  bun: null,\r\n  fillings: [],\r\n  createOrderInProgress: false,\r\n  createOrderSuccess: false,\r\n  createOrderFailed: false,\r\n  showOrderDetails: false,\r\n  orderDetails: null,\r\n};\r\n\r\nexport const cart = (state = initialState, action: TCartActions): TCartState => {\r\n  switch (action.type) {\r\n    case ActionTypes.UPDATE_CART:\r\n      return {\r\n        ...state,\r\n        bun: action.updatedCart.bun,\r\n        fillings: action.updatedCart.fillings,\r\n      };\r\n\r\n    case ActionTypes.CREATE_NEW_ORDER_REQUEST:\r\n      return {\r\n        ...state,\r\n        createOrderInProgress: true,\r\n      };\r\n\r\n    case ActionTypes.CREATE_NEW_ORDER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        createOrderInProgress: false,\r\n        createOrderSuccess: true,\r\n        orderDetails: action.orderDetails,\r\n        showOrderDetails: true,\r\n      };\r\n\r\n    case ActionTypes.CREATE_NEW_ORDER_FAILED:\r\n      return {\r\n        ...state,\r\n        createOrderInProgress: false,\r\n        createOrderFailed: true,\r\n      };\r\n\r\n    case ActionTypes.CLOSE_ORDER:\r\n      return {\r\n        ...state,\r\n        createOrderSuccess: false,\r\n        showOrderDetails: false,\r\n        orderDetails: null,\r\n        bun: null,\r\n        fillings: [],\r\n      };\r\n\r\n    default: return state;\r\n  }\r\n};\r\n","/* eslint-disable import/no-cycle */\r\nimport { ActionTypes } from '../actionTypes';\r\nimport { TUserActions } from './actions';\r\n\r\nexport type TUserState = {\r\n  name?: string,\r\n  email?: string,\r\n\r\n  registerRequest: boolean,\r\n  registerSuccess: boolean,\r\n  registerFailed: boolean,\r\n\r\n  loginRequest: boolean,\r\n  loginSuccess: boolean,\r\n  loginFailed: boolean,\r\n\r\n  logoutRequest: boolean,\r\n  logoutSuccess: boolean,\r\n  logoutFailed: boolean,\r\n\r\n  passwordResetCodeRequest: boolean,\r\n  passwordResetCodeSuccess: boolean,\r\n  passwordResetCodeFailed: boolean,\r\n\r\n  passwordResetRequest: boolean,\r\n  passwordResetSuccess: boolean,\r\n  passwordResetFailed: boolean,\r\n  refreshSuccess: boolean,\r\n\r\n  accessToken: string | null,\r\n  accessTokenTimeStamp: string | null,\r\n  refreshToken: string | null\r\n};\r\n\r\nconst initialState: TUserState = {\r\n\r\n  registerRequest: false,\r\n  registerSuccess: false,\r\n  registerFailed: false,\r\n\r\n  loginRequest: false,\r\n  loginSuccess: false,\r\n  loginFailed: false,\r\n\r\n  logoutRequest: false,\r\n  logoutSuccess: false,\r\n  logoutFailed: false,\r\n\r\n  passwordResetCodeRequest: false,\r\n  passwordResetCodeSuccess: false,\r\n  passwordResetCodeFailed: false,\r\n\r\n  passwordResetRequest: false,\r\n  passwordResetSuccess: false,\r\n  passwordResetFailed: false,\r\n  refreshSuccess: false,\r\n\r\n  accessToken: null,\r\n  accessTokenTimeStamp: null,\r\n  refreshToken: null,\r\n};\r\n\r\nexport const user = (state: TUserState = initialState, action: TUserActions) => {\r\n  switch (action.type) {\r\n    case ActionTypes.REGISTER_REQUEST:\r\n      return {\r\n        ...state,\r\n        registerRequest: true,\r\n      };\r\n\r\n    case ActionTypes.REGISTER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        registerRequest: false,\r\n        registerSuccess: true,\r\n\r\n        accessToken: action.data.accessToken,\r\n        accessTokenTimeStamp: action.data.timeStamp,\r\n        refreshToken: action.data.refreshToken,\r\n      };\r\n\r\n    case ActionTypes.REGISTER_FAILED:\r\n      return {\r\n        ...state,\r\n        registerRequest: false,\r\n        registerFailed: true,\r\n      };\r\n\r\n    case ActionTypes.LOGIN_REQUEST:\r\n      return {\r\n        ...state,\r\n        logoutSuccess: false,\r\n        loginRequest: true,\r\n        refreshSuccess: false,\r\n      };\r\n\r\n    case ActionTypes.LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loginRequest: false,\r\n        loginSuccess: true,\r\n\r\n        name: action.user.name,\r\n        email: action.user.email,\r\n      };\r\n\r\n    case ActionTypes.LOGIN_FAILED:\r\n      return {\r\n        ...state,\r\n        loginRequest: false,\r\n        loginFailed: true,\r\n      };\r\n\r\n    case ActionTypes.LOGOUT_REQUEST:\r\n      return {\r\n        ...state,\r\n        logoutRequest: true,\r\n      };\r\n\r\n    case ActionTypes.LOGOUT_SUCCESS:\r\n      return {\r\n        ...state,\r\n        logoutRequest: false,\r\n        logoutSuccess: true,\r\n        loginSuccess: false,\r\n        refreshSuccess: false,\r\n        name: null,\r\n        email: null,\r\n      };\r\n\r\n    case ActionTypes.LOGOUT_FAILED:\r\n      return {\r\n        ...state,\r\n        logoutRequest: false,\r\n        logoutFailed: true,\r\n      };\r\n\r\n    case ActionTypes.PASSWORD_RESET_CODE_REQUEST:\r\n      return {\r\n        ...state,\r\n        passwordResetCodeRequest: true,\r\n      };\r\n\r\n    case ActionTypes.PASSWORD_RESET_CODE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        passwordResetCodeRequest: false,\r\n        passwordResetCodeSuccess: true,\r\n      };\r\n\r\n    case ActionTypes.PASSWORD_RESET_CODE_FAILED:\r\n      return {\r\n        ...state,\r\n        passwordResetCodeRequest: false,\r\n        passwordResetCodeFailed: true,\r\n      };\r\n\r\n    case ActionTypes.PASSWORD_RESET_REQUEST:\r\n      return {\r\n        ...state,\r\n        passwordResetRequest: true,\r\n      };\r\n\r\n    case ActionTypes.PASSWORD_RESET_SUCCESS:\r\n      return {\r\n        ...state,\r\n        passwordResetRequest: false,\r\n        passwordResetSuccess: true,\r\n      };\r\n\r\n    case ActionTypes.PASSWORD_RESET_FAILED:\r\n      return {\r\n        ...state,\r\n        passwordResetRequest: false,\r\n        passwordResetFailed: true,\r\n        passwordResetCodeSuccess: false,\r\n      };\r\n\r\n    case ActionTypes.USER_REFRESH_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loginRequest: false,\r\n        loginSuccess: true,\r\n\r\n        name: action.user.name,\r\n        email: action.user.email,\r\n      };\r\n\r\n    default: return state;\r\n  }\r\n};\r\n","/* eslint-disable import/no-cycle */\r\nimport { TSocketList, TIngredientGroup } from '../services/types';\r\n\r\nconst ingredientGroups: Array<TIngredientGroup> = [\r\n  { type: 'bun', name: 'Булки' },\r\n  { type: 'sauce', name: 'Соусы' },\r\n  { type: 'main', name: 'Начинки' },\r\n];\r\n\r\nconst domain = 'https://norma.nomoreparties.space/api';\r\n\r\nconst dataUrl = `${domain}/ingredients`;\r\nconst orderUrl = `${domain}/orders`;\r\n\r\nconst authEndpoints = {\r\n  registerUrl: `${domain}/auth/register`,\r\n  authUrl: `${domain}/auth/login`,\r\n  logoutUrl: `${domain}/auth/logout`,\r\n  tokenUrl: `${domain}/auth/token`,\r\n  userUrl: `${domain}/auth/user`,\r\n};\r\n\r\nconst ws = 'wss://norma.nomoreparties.space';\r\nconst allOrdersWS = `${ws}/orders/all`;\r\nconst personalOrdersWS = `${ws}/orders`;\r\n\r\nconst socketType: TSocketList = {\r\n  allOrders: 'allOrders',\r\n  personalOrders: 'personalOrders',\r\n};\r\n\r\nconst passwordResetUrl = `${domain}/password-reset`;\r\nconst resetUrl = `${domain}/password-reset/reset`;\r\n\r\nconst accessTokenName = 'rb_accessToken';\r\nconst refreshTokenName = 'rb_refreshToken';\r\n\r\n// TODO: unite urls into objects\r\nexport {\r\n  dataUrl, orderUrl, ingredientGroups, passwordResetUrl, resetUrl, authEndpoints,\r\n  allOrdersWS, personalOrdersWS, socketType,\r\n  accessTokenName, refreshTokenName,\r\n};\r\n","/* eslint-disable import/no-cycle */\r\nimport { ActionTypes } from '../actionTypes';\r\nimport { socketType } from '../../utils/constants';\r\nimport {\r\n  TWSOrderActions, IWSOnError_AllOrders,\r\n  IWSOnError_UserOrders,\r\n  IWSOnGetMessage_AllOrders, IWSOnGetMessage_UserOrders,\r\n} from './actions';\r\n\r\nexport type TSocketState = {\r\n  wsConnected: boolean;\r\n  error: object | null;\r\n  messages: Array<object>;\r\n  data: object | null;\r\n};\r\n\r\nexport type TAllSocketsState = {\r\n  [name: string]: TSocketState\r\n};\r\n\r\nconst initialState: TAllSocketsState = {};\r\n\r\nObject.values(socketType).forEach((socket) => {\r\n  initialState[socketType[socket]] = {\r\n    wsConnected: false,\r\n    error: null,\r\n    messages: [],\r\n    data: null,\r\n  };\r\n});\r\n\r\nconst wsInit = (state: TAllSocketsState, action: TWSOrderActions, socketName: string) => ({\r\n  ...state,\r\n  [socketName]: {\r\n    ...state[socketName],\r\n    error: null,\r\n    wsConnected: true,\r\n  },\r\n});\r\n\r\n// это странно, но пришлось явно прописать юнион для экшенов с payload\r\n// компилятор не видит это свойство, я не понимаю в чём проблема,\r\n// т.к. в другом месте всё то же самое работает :(\r\nconst onError = (\r\n  state: TAllSocketsState,\r\n  action: IWSOnError_AllOrders | IWSOnError_UserOrders,\r\n  socketName: string,\r\n) => ({\r\n  ...state,\r\n  [socketName]: {\r\n    ...state[socketName],\r\n    error: action.payload,\r\n    wsConnected: false,\r\n  },\r\n});\r\n\r\nconst onClose = (state: TAllSocketsState, action: TWSOrderActions, socketName: string) => ({\r\n  ...state,\r\n  [socketName]: {\r\n    ...state[socketName],\r\n    error: null,\r\n    wsConnected: false,\r\n  },\r\n});\r\n\r\nconst onGetMessage = (\r\n  state: TAllSocketsState,\r\n  action: IWSOnGetMessage_AllOrders | IWSOnGetMessage_UserOrders,\r\n  socketName: string,\r\n) => ({\r\n  ...state,\r\n  [socketName]: {\r\n    ...state[socketName],\r\n    error: null,\r\n    data: JSON.parse(action.payload),\r\n    messages: [...state[socketName].messages, JSON.parse(action.payload)],\r\n  },\r\n});\r\n\r\nexport const orders = (state = initialState, action: TWSOrderActions) => {\r\n  switch (action.type) {\r\n    case ActionTypes.wsAllOrders.onOpen:\r\n    case ActionTypes.wsUserOrders.onOpen:\r\n      return wsInit(state, action, action.socketName);\r\n\r\n    case ActionTypes.wsAllOrders.onError:\r\n    case ActionTypes.wsUserOrders.onError:\r\n      return onError(state, action, action.socketName);\r\n\r\n    case ActionTypes.wsAllOrders.onClose:\r\n    case ActionTypes.wsUserOrders.onClose:\r\n      return onClose(state, action, action.socketName);\r\n\r\n    case ActionTypes.wsAllOrders.onGetMessage:\r\n    case ActionTypes.wsUserOrders.onGetMessage:\r\n      return onGetMessage(state, action, action.socketName);\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","/* eslint-disable import/no-cycle */\r\nimport { combineReducers } from 'redux';\r\n\r\nimport { ingredients } from './ingredients/reducer';\r\nimport { cart } from './cart/reducer';\r\nimport { user } from './user/reducer';\r\nimport { orders } from './orders/reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  ingredients,\r\n  cart,\r\n  user,\r\n  orders,\r\n});\r\n\r\nexport default rootReducer;\r\n","/* eslint-disable no-param-reassign */\r\n/*\r\nfind cookie by name\r\n*/\r\nexport function getCookie(name: string): string {\r\n  const matches = document.cookie.match(\r\n    // eslint-disable-next-line no-useless-escape\r\n    new RegExp(`(?:^|; )${name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1')}=([^;]*)`),\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : '';\r\n}\r\n\r\nexport function getCookieValue(name : string): string | undefined {\r\n  const cookie = getCookie(name);\r\n\r\n  if (cookie && cookie.indexOf('Bearer') === 0) {\r\n    return cookie.split('Bearer ')[1];\r\n  }\r\n\r\n  return cookie;\r\n}\r\n\r\nexport function setCookie(name:string, value: string, props: { [name:string]: any } = {}) {\r\n  let exp = props.expires;\r\n\r\n  if (typeof exp === 'number' && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    props.expires = d;\r\n    exp = d;\r\n  }\r\n\r\n  if (exp && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n\r\n  let updatedCookie = `${name}=${encodeURIComponent(value)}`;\r\n\r\n  Object.keys(props).forEach((propName) => {\r\n    updatedCookie += `; ${propName}`;\r\n    const propValue = props[propName];\r\n    if (!propValue) {\r\n      updatedCookie += `=${propValue}`;\r\n    }\r\n  });\r\n\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function deleteCookie(name:string) {\r\n  setCookie(name, '', { expires: -1 });\r\n}\r\n","/* eslint-disable import/no-cycle */\r\nimport { Middleware } from 'redux';\r\nimport {\r\n  accessTokenName, allOrdersWS, personalOrdersWS, socketType,\r\n} from '../../utils/constants';\r\nimport { ActionTypes, TWSUserOrders, TWSAllOrders } from '../actionTypes';\r\nimport { getCookieValue } from '../../utils/cookie';\r\nimport { RootState } from '../types';\r\n\r\nconst createSocket = (type: string): [\r\n  socket: WebSocket | null,\r\n  wsActions: TWSAllOrders | TWSUserOrders | null,\r\n  socketName: string | null] => {\r\n  if (type === ActionTypes.wsAllOrders.wsInit) {\r\n    return [new WebSocket(allOrdersWS), ActionTypes.wsAllOrders, socketType.allOrders];\r\n  }\r\n\r\n  if (type === ActionTypes.wsUserOrders.wsInit && getCookieValue(accessTokenName)) {\r\n    return [new WebSocket(`${personalOrdersWS}?token=${getCookieValue(accessTokenName)}`), ActionTypes.wsUserOrders, socketType.personalOrders];\r\n  }\r\n\r\n  return [null, null, null];\r\n};\r\n\r\nconst socketMiddleware: Middleware<{}, RootState> = (store) => (next) => (action) => {\r\n  const { dispatch } = store;\r\n  const { type, payload } = action;\r\n  const [socket, wsActions, socketName] = createSocket(type);\r\n\r\n  if (socket !== null && wsActions !== null) {\r\n    socket.onopen = (event) => {\r\n      dispatch({ type: wsActions.onOpen, payload: event, socketName });\r\n    };\r\n\r\n    socket.onerror = (event) => {\r\n      dispatch({ type: wsActions.onError, payload: event, socketName });\r\n    };\r\n\r\n    socket.onmessage = (event) => {\r\n      const { data } = event;\r\n      dispatch({ type: wsActions.onGetMessage, payload: data, socketName });\r\n    };\r\n\r\n    socket.onclose = (event) => {\r\n      dispatch({ type: wsActions.onClose, payload: event, socketName });\r\n    };\r\n\r\n    if (type === wsActions.wsSendMessage) {\r\n      const message = payload;\r\n      socket.send(JSON.stringify(message));\r\n    }\r\n  }\r\n  next(action);\r\n};\r\n\r\nexport default socketMiddleware;\r\n","import thunk from 'redux-thunk';\r\nimport { compose, createStore, applyMiddleware } from 'redux';\r\n// eslint-disable-next-line import/no-cycle\r\nimport rootReducer from './rootReducer';\r\nimport socketMiddleware from './middleware/socketMiddleware';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n  }\r\n}\r\n\r\nexport const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware));\r\nexport const store = createStore(rootReducer, enhancer);\r\n","/* eslint-disable import/no-cycle */\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { ActionCreator } from 'redux';\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\n// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport { Location } from 'history';\r\nimport { store } from '../store';\r\n\r\nimport { TCartActions } from '../cart/actions';\r\nimport { TIngredientActions } from '../ingredients/actions';\r\nimport { TWSOrderActions } from '../orders/actions';\r\nimport { TUserActions } from '../user/actions';\r\n\r\nimport rootReducer from '../rootReducer';\r\n\r\nexport interface ILocation extends Location {\r\n  background?: any;\r\n}\r\n\r\nexport type TNavItem = {\r\n  id: string;\r\n  title: string;\r\n  to?: string;\r\n  icon?: any;\r\n  cssClass?: string;\r\n  subitems?: Array<{ id: string, title: string }>;\r\n};\r\n\r\nexport type TIngredient = {\r\n  _id: string;\r\n  name: string;\r\n  type: 'bun' | 'sauce' | 'main';\r\n  proteins: number;\r\n  fat: number;\r\n  carbohydrates: number;\r\n  calories: number;\r\n  price: number;\r\n  image: string;\r\n  image_mobile: string;\r\n  image_large: string;\r\n  __v: number;\r\n  key: string;\r\n};\r\n\r\nexport type TOrder = {\r\n  _id: string;\r\n  name: string;\r\n  number: number;\r\n  ingredients: string[];\r\n  updatedAt: string;\r\n  status: string;\r\n};\r\n\r\nexport type TIngredientGroup = {\r\n  type: 'bun' | 'sauce' | 'main';\r\n  name?: string;\r\n};\r\n\r\nexport type TIngredientWithKey = TIngredient & {\r\n  key: string;\r\n};\r\n\r\nexport type TOrderIngredients = {\r\n  bun: TIngredient;\r\n  fillings: Array<TIngredient>;\r\n};\r\n\r\nexport type TOrderDetails = {\r\n  success: boolean;\r\n  order: { number: number };\r\n};\r\n\r\nexport type TSocketList = {\r\n  [name:string]: string;\r\n};\r\n\r\n// export type RootState = ReturnType<typeof store.getState>;\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\n\r\ntype TApplicationActions = TCartActions & TIngredientActions & TWSOrderActions & TUserActions;\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\n// eslint-disable-next-line max-len\r\nexport type AppThunk<TReturn = void> = ActionCreator< ThunkAction<TReturn, RootState, unknown, TApplicationActions> >;\r\n\r\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\r\nexport const useAppDispatch = () => useDispatch<AppDispatch | AppThunk>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","/* eslint-disable import/no-cycle */\r\nimport React, { ReactElement } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport styles from './nav-item.module.css';\r\nimport NavList from '../nav-list/nav-list';\r\nimport { TNavItem } from '../../../services/types/index';\r\n\r\nfunction NavItem({\r\n  data: {\r\n    id, title, icon, cssClass, subitems, to,\r\n  },\r\n}: { data: TNavItem }): ReactElement {\r\n  const isActive = (match: any) => {\r\n    if (id === 'logo_desktop' || !match || !match.isExact) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  return (\r\n    <li className={cssClass ? styles[cssClass] : styles.nav_item}>\r\n      <NavLink\r\n        to={to || '/'}\r\n        isActive={isActive}\r\n        className={styles.nav_link}\r\n        activeClassName=\"nav_link-active\"\r\n      >\r\n        {icon}\r\n        <span className={styles.link_text}>{title}</span>\r\n      </NavLink>\r\n      { !!subitems && <NavList data={subitems} type=\"nested\" />}\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default NavItem;\r\n","/* eslint-disable import/no-cycle */\r\nimport React, { ReactElement } from 'react';\r\nimport styles from './nav-list.module.css';\r\nimport NavItem from '../nav-item/nav-item';\r\n\r\nimport { TNavItem } from '../../../services/types/index';\r\n\r\ninterface INavListProps {\r\n  data: Array<TNavItem>;\r\n  type: 'main' | 'nested';\r\n}\r\n\r\nfunction NavList({ data, type }: INavListProps): ReactElement {\r\n  return (\r\n    <ul className={type === 'main' ? styles.main_nav : styles.nested_nav}>\r\n      { data && data.map((item: TNavItem) => (\r\n        <NavItem\r\n          key={item.id}\r\n          data={item}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default NavList;\r\n","import React from 'react';\r\nimport {\r\n  Logo,\r\n  BurgerIcon,\r\n  ListIcon,\r\n  ProfileIcon,\r\n  CloseIcon,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { MenuIcon } from '@ya.praktikum/react-developer-burger-ui-components/dist/ui/icons/menu-icon';\r\nimport styles from './app-header.module.css';\r\nimport NavList from './nav-list/nav-list';\r\n\r\nfunction AppHeader(): React.ReactElement | null {\r\n  const menuItems = [\r\n    {\r\n      id: 'constructor', title: 'Конструктор', to: '/', icon: <BurgerIcon type=\"secondary\" />,\r\n    },\r\n    {\r\n      id: 'feed', title: 'Лента заказов', to: '/feed', icon: <ListIcon type=\"secondary\" />,\r\n    },\r\n    {\r\n      id: 'logo_desktop', title: '', to: '/', icon: <Logo />, cssClass: 'logo_desktop_item',\r\n    },\r\n    {\r\n      id: 'profile',\r\n      title: 'Личный кабинет',\r\n      to: '/profile',\r\n      icon: <ProfileIcon type=\"secondary\" />,\r\n      cssClass: 'profile_item',\r\n      subitems: [\r\n        { id: 'account', title: 'Профиль' },\r\n        { id: 'history', title: 'История заказов' },\r\n        { id: 'logout', title: 'Выход' },\r\n      ],\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <header className={styles.header}>\r\n\r\n      <h1 className=\"visually-hidden\"><span>Stellar Burger</span></h1>\r\n\r\n      <nav className={styles.nav}>\r\n        <div className=\"visibility_mobile\"><Logo /></div>\r\n        <NavList data={menuItems} type=\"main\" />\r\n        <div className=\"visibility_mobile\"><CloseIcon type=\"primary\" /></div>\r\n        <div className=\"visibility_mobile\"><MenuIcon type=\"primary\" /></div>\r\n      </nav>\r\n\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default AppHeader;\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nimport { useAppSelector } from '../../services/types';\r\n\r\ninterface IRouteForAuthorizedUsersProps {\r\n  children: any,\r\n  [name: string]: any;\r\n}\r\n\r\nfunction RouteForAuthorizedUsers({ children, ...rest }: IRouteForAuthorizedUsersProps) {\r\n  const { loginSuccess } = useAppSelector((store) => store.user);\r\n\r\n  const render = ({ location } : { location: any }) => {\r\n    if (loginSuccess) {\r\n      return children;\r\n    }\r\n\r\n    return <Redirect to={{ pathname: '/login', state: { target: location } }} />;\r\n  };\r\n\r\n  // eslint-disable-next-line react/jsx-props-no-spreading\r\n  return <Route {...rest} render={render} />;\r\n}\r\n\r\nexport default RouteForAuthorizedUsers;\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { useAppSelector } from '../../services/types';\r\n\r\nconst getNextPage = (location: any) => {\r\n  let result;\r\n\r\n  if (location && location.state?.target) {\r\n    result = location.state.target;\r\n    // eslint-disable-next-line no-param-reassign\r\n    delete location.state.target;\r\n  } else {\r\n    result = '/';\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\ninterface IRouteForUnauthorizedUsersProps {\r\n  children: any,\r\n  [name: string]: any;\r\n}\r\n\r\nfunction RouteForUnauthorizedUsers({ children, ...rest }: IRouteForUnauthorizedUsersProps) {\r\n  const { loginSuccess } = useAppSelector((store) => store.user);\r\n\r\n  const render = ({ location } : { location: any }) => {\r\n    if (!loginSuccess) {\r\n      return children;\r\n    }\r\n\r\n    return <Redirect to={getNextPage(location)} />;\r\n  };\r\n\r\n  // eslint-disable-next-line react/jsx-props-no-spreading\r\n  return <Route {...rest} render={render} />;\r\n}\r\n\r\nexport default RouteForUnauthorizedUsers;\r\n","import React from 'react';\r\nimport styles from './ingredient-group.module.css';\r\n\r\nimport { TIngredientGroup } from '../../../services/types/index';\r\n\r\ninterface IIngredientGroupProps {\r\n  data: TIngredientGroup\r\n  children: any\r\n}\r\n\r\nfunction IngredientGroup({ data: { type, name }, children }: IIngredientGroupProps) {\r\n  return (\r\n    <section id={type} key={type} className={styles.group}>\r\n\r\n      <header>\r\n        <h3 className={styles.title}>{name}</h3>\r\n      </header>\r\n\r\n      <ul className={styles.ingredients}>\r\n        {children}\r\n      </ul>\r\n\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default IngredientGroup;\r\n","/* eslint-disable import/no-cycle */\r\n/* eslint-disable no-underscore-dangle */\r\nimport { TIngredient, TIngredientWithKey } from '../types';\r\n\r\nclass CartActions {\r\n  static createNewIngredient(ingredients: TIngredient[], ingredientID: string): TIngredientWithKey {\r\n    const newIngredient = {\r\n      ...ingredients\r\n        .filter((item: TIngredient) => item._id === ingredientID)[0],\r\n    };\r\n\r\n    newIngredient.key = CartActions.getIngredientKey(newIngredient);\r\n\r\n    return newIngredient;\r\n  }\r\n\r\n  static getIngredientKey(ingredient: TIngredient): string {\r\n    return ingredient.type === 'bun' ? ingredient._id : [ingredient._id, Date.now()].join('_');\r\n  }\r\n}\r\n\r\nexport default CartActions;\r\n","/* eslint-disable import/no-cycle */\r\n/* eslint-disable no-underscore-dangle */\r\nimport { orderUrl, accessTokenName } from '../../utils/constants';\r\nimport { ActionTypes } from '../actionTypes';\r\nimport {\r\n  TOrderDetails, TIngredient, AppThunk, AppDispatch,\r\n} from '../types';\r\nimport { getCookie } from '../../utils/cookie';\r\nimport { TCartState } from './reducer';\r\nimport CartActions from './CartActions';\r\n\r\nexport interface IUpdateCart {\r\n  readonly type: typeof ActionTypes.UPDATE_CART;\r\n  readonly updatedCart: TCartState;\r\n}\r\n\r\nexport interface ICreateNewOrderRequest {\r\n  readonly type: typeof ActionTypes.CREATE_NEW_ORDER_REQUEST\r\n}\r\n\r\nexport interface ICreateNewOrderSuccess {\r\n  readonly type: typeof ActionTypes.CREATE_NEW_ORDER_SUCCESS;\r\n  readonly orderDetails: TOrderDetails;\r\n}\r\n\r\nexport interface ICreateNewOrderFailed {\r\n  readonly type: typeof ActionTypes.CREATE_NEW_ORDER_FAILED\r\n}\r\n\r\nexport interface ICloseOrder {\r\n  readonly type: typeof ActionTypes.CLOSE_ORDER\r\n}\r\n\r\nexport type TCartActions =\r\n| IUpdateCart\r\n| ICreateNewOrderFailed\r\n| ICreateNewOrderRequest\r\n| ICreateNewOrderSuccess\r\n| ICloseOrder;\r\n\r\n// eslint-disable-next-line max-len\r\nexport const addIngredientToCart: AppThunk = (ingredientID: string, positionIndex: number | null = null) => (dispatch: AppDispatch, getState) => {\r\n  const newIngredient = CartActions.createNewIngredient(\r\n    getState().ingredients.items,\r\n    ingredientID,\r\n  );\r\n  const updatedCart = { ...getState().cart };\r\n  if (newIngredient.type === 'bun') {\r\n    // buns are the same => we need info about only one bun\r\n    updatedCart.bun = newIngredient;\r\n  } else if (!updatedCart.fillings.length) {\r\n    // no fillings => no re-order of the fillings\r\n    updatedCart.fillings.push(newIngredient);\r\n  } else if (positionIndex === null) {\r\n    // some fillings defined, but new one has no special position => no re-order\r\n    updatedCart.fillings.push(newIngredient);\r\n  } else {\r\n    // there are fillings and position of the new one is defined explicitly\r\n    const updatedFillings = [...updatedCart.fillings];\r\n    updatedFillings.splice(positionIndex, 0, newIngredient);\r\n    updatedCart.fillings = updatedFillings;\r\n  }\r\n\r\n  dispatch({ type: ActionTypes.UPDATE_CART, updatedCart });\r\n};\r\n\r\n// eslint-disable-next-line max-len\r\nexport const removeIngredientFromCart: AppThunk = (ingredientKey: string) => (dispatch: AppDispatch, getState) => {\r\n  const prevCart = getState().cart;\r\n  const removedIngredientIndex = prevCart\r\n    .fillings\r\n    .findIndex((item: TIngredient) => item.key === ingredientKey);\r\n  const updatedFillings = [...prevCart.fillings];\r\n\r\n  updatedFillings.splice(removedIngredientIndex, 1);\r\n\r\n  dispatch({\r\n    type: ActionTypes.UPDATE_CART,\r\n    updatedCart: { ...prevCart, fillings: updatedFillings },\r\n  });\r\n};\r\n\r\nexport const createOrder: AppThunk = () => (dispatch: AppDispatch, getState) => {\r\n  dispatch({ type: ActionTypes.CREATE_NEW_ORDER_REQUEST });\r\n\r\n  const prevCart: TCartState = getState().cart;\r\n  const { bun, fillings } = { ...prevCart };\r\n\r\n  fetch(orderUrl, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: getCookie(accessTokenName),\r\n    },\r\n    body: JSON.stringify({ ingredients: [...fillings, bun, bun].map((item) => item && item._id) }),\r\n  })\r\n    .then((res) => (res.ok ? res.json() : Promise.reject(res)))\r\n    .then((res) => {\r\n      dispatch({ type: ActionTypes.CREATE_NEW_ORDER_SUCCESS, orderDetails: res });\r\n    })\r\n    .catch(() => {\r\n      dispatch({ type: ActionTypes.CREATE_NEW_ORDER_FAILED });\r\n    });\r\n};\r\n\r\n// eslint-disable-next-line max-len\r\nexport const sortFillingsOrder: AppThunk = (oldItemIndex: number, newItemIndex: number) => (dispatch: AppDispatch, getState) => {\r\n  const prevCart = getState().cart;\r\n  const newFillings = [...prevCart.fillings];\r\n\r\n  const itemToMove = newFillings[oldItemIndex];\r\n  newFillings.splice(oldItemIndex, 1);\r\n  newFillings.splice(newItemIndex, 0, itemToMove);\r\n\r\n  const updatedCart = { ...prevCart, fillings: newFillings };\r\n\r\n  dispatch({ type: ActionTypes.UPDATE_CART, updatedCart });\r\n};\r\n","/* eslint-disable no-underscore-dangle */\r\nimport React from 'react';\r\nimport { useDrag } from 'react-dnd';\r\n\r\nimport { Counter, CurrencyIcon, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './ingredient.module.css';\r\n\r\nimport { addIngredientToCart } from '../../../services/cart/actions';\r\n\r\nimport { useAppSelector, useAppDispatch, TIngredient } from '../../../services/types';\r\n\r\ninterface IIngredient {\r\n  data: TIngredient;\r\n  openModal: (data:TIngredient) => void;\r\n}\r\n\r\nfunction Ingredient({ data, openModal }: IIngredient) {\r\n  const dispatch = useAppDispatch();\r\n  const { bun, fillings } = useAppSelector((store) => store.cart);\r\n  const [, dragRef] = useDrag({ type: 'ingredient', item: { id: data._id, type: data.type } });\r\n\r\n  const ingredientCount = React.useMemo(() => {\r\n    let count = [...fillings, bun]\r\n      .filter((ingredient) => ingredient && data._id === ingredient._id)\r\n      .length;\r\n    if (data.type === 'bun' && count > 0) {\r\n      count += 1;\r\n    }\r\n    return count;\r\n  }, [fillings, bun, data._id, data.type]);\r\n\r\n  const addIngredientViaButton = (e: React.SyntheticEvent) => {\r\n    e.stopPropagation();\r\n    dispatch(addIngredientToCart(data._id));\r\n  };\r\n\r\n  const openIngredientDetails = (e: React.MouseEvent) => {\r\n    if ((e.target as Element).nodeName !== 'BUTTON') {\r\n      openModal(data);\r\n    }\r\n  };\r\n\r\n  const { image, name, price } = data;\r\n\r\n  return (\r\n    // eslint-disable-next-line max-len\r\n    // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-noninteractive-element-interactions\r\n    <li className={styles.card} onClick={openIngredientDetails} ref={dragRef}>\r\n\r\n      { ingredientCount > 0 && <Counter count={ingredientCount} size=\"default\" /> }\r\n      <img src={image} alt={name} className={styles.image} />\r\n      <div className={styles.price}>\r\n        <span className={styles.price_num}>{price}</span>\r\n        <CurrencyIcon type=\"secondary\" />\r\n      </div>\r\n      <div className={styles.name}>{name}</div>\r\n      <div className={styles.add_btn}>\r\n        <Button type=\"secondary\" size=\"medium\" onClick={addIngredientViaButton}>Добавить</Button>\r\n      </div>\r\n\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Ingredient;\r\n","import React from 'react';\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { ingredientGroups } from '../../../utils/constants';\r\n\r\ninterface ITabMenu {\r\n  burgerIngredientsEl: { current: HTMLElement | null } ;\r\n  currentTab: 'bun' | 'sauce' | 'main';\r\n  updateCurrentTab: (tabValue:'bun' | 'sauce' | 'main') => any;\r\n}\r\n\r\nfunction TabMenu({ burgerIngredientsEl, currentTab, updateCurrentTab }: ITabMenu) {\r\n  const scrollIntoSection = (tabValue: string) => {\r\n    const section = burgerIngredientsEl.current && burgerIngredientsEl.current.querySelector(`section[id=${tabValue}]`);\r\n    if (section) {\r\n      section.scrollIntoView({ behavior: 'smooth' });\r\n      updateCurrentTab(tabValue as 'bun' | 'sauce' | 'main');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: 'flex' }}>\r\n      { ingredientGroups.map((ingredientGroup) => (\r\n        <Tab\r\n          key={ingredientGroup.type}\r\n          value={ingredientGroup.type}\r\n          active={currentTab === ingredientGroup.type}\r\n          onClick={scrollIntoSection}\r\n        >\r\n          {ingredientGroup.name}\r\n        </Tab>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TabMenu;\r\n","import React from 'react';\r\nimport styles from './modal-overlay.module.css';\r\n\r\ninterface IModalOverlayProps {\r\n  onClose: (e: React.MouseEvent | React.KeyboardEvent) => void;\r\n}\r\n\r\nfunction ModalOverlay({ onClose }: IModalOverlayProps) {\r\n  // eslint-disable-next-line max-len\r\n  // eslint-disable-next-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events\r\n  return <div className={styles.backdrop} onClick={onClose} />;\r\n}\r\n\r\nexport default ModalOverlay;\r\n","/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\r\n/* eslint-disable jsx-a11y/no-noninteractive-tabindex */\r\nimport React, { useState, FC } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './modal.module.css';\r\nimport ModalOverlay from '../modal-overlay/modal-overlay';\r\n\r\ninterface IModalProps {\r\n  onClose: (e: React.MouseEvent | React.KeyboardEvent) => void;\r\n  type: 'ingredient' | 'order' | 'orderInfo';\r\n}\r\n\r\nconst Modal: FC<IModalProps> = ({ children, onClose, type }) => {\r\n  // input for tab trap inside modal\r\n  const [activeBeforeModal, setActiveBeforeModal] = useState<HTMLElement | null>(null);\r\n  const [modalControls, setModalControls] = useState<Array<HTMLElement>>([]);\r\n\r\n  const modalComponent = React.useRef<HTMLElement>(null);\r\n\r\n  React.useEffect(() => {\r\n    setActiveBeforeModal(document.activeElement as HTMLElement);\r\n\r\n    if (modalComponent.current) {\r\n      setModalControls([modalComponent.current, modalComponent.current.querySelector('button') as HTMLElement]);\r\n      modalComponent.current.focus();\r\n    }\r\n  }, []);\r\n\r\n  const addTabTrap = (e: React.KeyboardEvent) => {\r\n    if (e.code === 'Tab') {\r\n      const { activeElement } = document;\r\n\r\n      if (e.shiftKey && activeElement === modalControls[0]) {\r\n        e.preventDefault();\r\n        modalControls[modalControls.length - 1].focus();\r\n      }\r\n\r\n      if (activeElement === modalControls[modalControls.length - 1]) {\r\n        e.preventDefault();\r\n        modalControls[0].focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.code === 'Escape' && activeBeforeModal) {\r\n      activeBeforeModal.focus();\r\n      onClose(e);\r\n    }\r\n\r\n    addTabTrap(e);\r\n  };\r\n\r\n  const modalRoot = document.querySelector('#modals') as Element;\r\n\r\n  return ReactDOM.createPortal(\r\n    (\r\n      <>\r\n        <article\r\n          className={styles.modal}\r\n          tabIndex={0}\r\n          ref={modalComponent}\r\n          onKeyDown={handleKeyDown}\r\n        >\r\n          <button type=\"button\" className={styles[`close_btn_${type}`]} onClick={onClose}>\r\n            <CloseIcon type=\"secondary\" />\r\n          </button>\r\n          {children}\r\n        </article>\r\n        <ModalOverlay onClose={onClose} />\r\n      </>\r\n    ),\r\n    modalRoot,\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","/* eslint-disable no-underscore-dangle */\r\nimport React from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport { useAppSelector } from '../../services/types';\r\n\r\nimport styles from './ingredient-details.module.css';\r\n\r\nfunction IngredientDetails(): React.ReactElement | null {\r\n  const { id } = useParams<{ id:string }>();\r\n  const { items } = useAppSelector((store) => store.ingredients);\r\n\r\n  const activeIngredientFromStore = useAppSelector((store) => store.ingredients.activeIngredient);\r\n  const activeIngredientFromUrl = id ? items.find((item) => item._id === id) : null;\r\n  const activeIngredient = activeIngredientFromUrl || activeIngredientFromStore;\r\n\r\n  if (!activeIngredient) {\r\n    return null;\r\n  }\r\n\r\n  const {\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    name, calories, proteins, fat, carbohydrates, image_large,\r\n  } = activeIngredient;\r\n\r\n  const nutritionItems = [\r\n    { id: 'calories', title: 'Калории, ккал', value: calories },\r\n    { id: 'proteins', title: 'Белки, г', value: proteins },\r\n    { id: 'fat', title: 'Жиры, г', value: fat },\r\n    { id: 'carbohydrates', title: 'Углеводы, г', value: carbohydrates },\r\n  ];\r\n\r\n  return (\r\n    <section className={styles.details_section}>\r\n\r\n      <header className={styles.details_header}>Детали ингредиента</header>\r\n      <img src={image_large} alt={name} />\r\n      <h4 className={styles.details_title}>{name}</h4>\r\n\r\n      <dl className={styles.nutrition_info}>\r\n\r\n        { nutritionItems.map((item) => (\r\n          <div key={item.id} className={styles.nutrition_item}>\r\n            <dt className={styles.nutrition_title}>\r\n\r\n              {item.title}\r\n\r\n            </dt>\r\n            <dd className={styles.nutrition_val}>\r\n\r\n              {item.value}\r\n\r\n            </dd>\r\n          </div>\r\n        ))}\r\n      </dl>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default IngredientDetails;\r\n","/* eslint-disable no-underscore-dangle */\r\nimport React from 'react';\r\nimport { Link, useLocation, useHistory } from 'react-router-dom';\r\n\r\nimport styles from './burger-ingredients.module.css';\r\n\r\nimport IngredientGroup from './ingredient-group/ingredient-group';\r\nimport Ingredient from './ingredient/ingredient';\r\nimport TabMenu from './tab-menu/tab-menu';\r\nimport Modal from '../modal/modal';\r\nimport IngredientDetails from '../ingredient-details/ingredient-details';\r\n\r\nimport { ingredientGroups } from '../../utils/constants';\r\n\r\nimport { ActionTypes } from '../../services/actionTypes';\r\n\r\nimport {\r\n  useAppDispatch, useAppSelector, TIngredient, TIngredientGroup,\r\n} from '../../services/types';\r\n\r\nfunction BurgerIngredients() {\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n\r\n  const [currentTab, setCurrentTab] = React.useState<'bun' | 'sauce' | 'main'>('bun');\r\n\r\n  const dispatch = useAppDispatch();\r\n  const { items, showIngredientDetails } = useAppSelector((store) => store.ingredients);\r\n\r\n  const burgerIngredientsEl = React.useRef<HTMLElement>(null);\r\n\r\n  const openModal = (ingredient: TIngredient) => {\r\n    dispatch({ type: ActionTypes.SET_ACTIVE_INGREDIENT, value: ingredient });\r\n    dispatch({ type: ActionTypes.SHOW_INGREDIENT_DETAILS, value: true });\r\n  };\r\n\r\n  const closeModal = (e: React.MouseEvent | React.KeyboardEvent) => {\r\n    e.stopPropagation();\r\n    dispatch({ type: ActionTypes.SHOW_INGREDIENT_DETAILS, value: false });\r\n    dispatch({ type: ActionTypes.SET_ACTIVE_INGREDIENT, value: null });\r\n    history.goBack();\r\n  };\r\n\r\n  const getIngredientsFrom = (group: TIngredientGroup) => (\r\n    items\r\n      .filter((ingredient) => ingredient.type === group.type)\r\n      .map((ingredient) => (\r\n        <Link key={ingredient._id} to={{ pathname: `/ingredients/${ingredient._id}`, state: { background: location } }}>\r\n          <Ingredient\r\n            data={ingredient}\r\n            openModal={openModal}\r\n          />\r\n        </Link>\r\n      ))\r\n  );\r\n\r\n  const updateActiveTabOnScroll = (e: React.UIEvent) => {\r\n    if (!e.target) {\r\n      return;\r\n    }\r\n\r\n    const scrollableArea = e.target as Element;\r\n    const scrollableAreaTop = scrollableArea.getBoundingClientRect().y;\r\n    const scrollableIngredientGroups = Array.prototype.slice.call(scrollableArea.querySelectorAll('section'));\r\n\r\n    const isClosestHeaderVisible = (\r\n      section: Element,\r\n      sectionIndex: number,\r\n      allSections: Array<object>,\r\n    ) => {\r\n      if (sectionIndex === allSections.length - 1) { // last section is active\r\n        return true;\r\n      }\r\n\r\n      const sectionRect = section.querySelector('ul')!.getBoundingClientRect();\r\n      return sectionRect.y >= scrollableAreaTop;\r\n    };\r\n\r\n    const visibleGroup = scrollableIngredientGroups.find(isClosestHeaderVisible);\r\n\r\n    setCurrentTab(visibleGroup.getAttribute('id'));\r\n  };\r\n\r\n  return (\r\n    <article className={styles.ingredients}>\r\n      <header>\r\n        <h2 className={styles.title}>Соберите бургер</h2>\r\n      </header>\r\n\r\n      <TabMenu\r\n        burgerIngredientsEl={burgerIngredientsEl}\r\n        currentTab={currentTab}\r\n        updateCurrentTab={setCurrentTab}\r\n      />\r\n\r\n      <section\r\n        className={styles.ingredient_groups}\r\n        ref={burgerIngredientsEl}\r\n        onScroll={updateActiveTabOnScroll}\r\n      >\r\n        { ingredientGroups.map((group) => (\r\n          <IngredientGroup key={group.type} data={group}>\r\n            { getIngredientsFrom(group) }\r\n          </IngredientGroup>\r\n        ))}\r\n      </section>\r\n\r\n      { showIngredientDetails\r\n                && (\r\n                <Modal type=\"ingredient\" onClose={closeModal}>\r\n                  <IngredientDetails />\r\n                </Modal>\r\n                )}\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default BurgerIngredients;\r\n","import * as React from 'react';\r\n\r\nfunction OrderDetailsIcon() {\r\n  return (\r\n    <svg\r\n      width={107}\r\n      height={102}\r\n      viewBox=\"0 0 107 102\"\r\n      fill=\"none\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        clipRule=\"evenodd\"\r\n        d=\"M8.366 37.387c-5.821 8.117-5.821 19.109 0 27.226l19.968 27.839c5.821 8.117 16.14 11.513 25.56 8.413l32.308-10.634C95.622 87.131 102 78.24 102 68.206V33.794c0-10.033-6.378-18.925-15.798-22.025L53.895 1.135c-9.42-3.1-19.74.296-25.561 8.413L8.366 37.388z\"\r\n        fill=\"url(#prefix__paint0_radial)\"\r\n        fillOpacity={0.25}\r\n      />\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        clipRule=\"evenodd\"\r\n        d=\"M103.944 39.453a23.341 23.341 0 010 23.094L88.6 89.453C84.525 96.598 76.994 101 68.844 101H38.156c-8.15 0-15.68-4.402-19.756-11.547L3.056 62.547a23.342 23.342 0 010-23.094L18.4 12.547C22.475 5.402 30.006 1 38.156 1h30.688c8.15 0 15.68 4.402 19.756 11.547l15.344 26.906z\"\r\n        fill=\"url(#prefix__paint1_radial)\"\r\n        fillOpacity={0.25}\r\n      />\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        clipRule=\"evenodd\"\r\n        d=\"M43.925 20.91a15.602 15.602 0 0118.15 0l18.56 13.312c5.41 3.882 7.675 10.761 5.608 17.041l-7.089 21.539c-2.067 6.28-7.995 10.531-14.684 10.531H41.53c-6.69 0-12.617-4.251-14.684-10.531l-7.09-21.539c-2.066-6.28.198-13.16 5.61-17.04L43.925 20.91z\"\r\n        fill=\"url(#prefix__paint2_radial)\"\r\n        fillOpacity={0.25}\r\n      />\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        clipRule=\"evenodd\"\r\n        d=\"M73.312 37.596c.888.821.92 2.185.073 3.045L50.052 64.333a2.257 2.257 0 01-1.63.667 2.255 2.255 0 01-1.616-.698L34.584 51.378a2.108 2.108 0 01.137-3.043 2.272 2.272 0 013.14.133l10.616 11.225L70.17 37.667a2.272 2.272 0 013.142-.071z\"\r\n        fill=\"#F2F2F3\"\r\n      />\r\n      <defs>\r\n        <radialGradient\r\n          id=\"prefix__paint0_radial\"\r\n          cx={0}\r\n          cy={0}\r\n          r={1}\r\n          gradientUnits=\"userSpaceOnUse\"\r\n          gradientTransform=\"matrix(48.99995 -51.00002 38.36416 36.85964 53 51)\"\r\n        >\r\n          <stop stopColor=\"#801AB3\" stopOpacity={0} />\r\n          <stop offset={1} stopColor=\"#4C4CFF\" />\r\n        </radialGradient>\r\n        <radialGradient\r\n          id=\"prefix__paint1_radial\"\r\n          cx={0}\r\n          cy={0}\r\n          r={1}\r\n          gradientUnits=\"userSpaceOnUse\"\r\n          gradientTransform=\"matrix(53.50001 -50.00001 37.55596 40.18488 53.5 51)\"\r\n        >\r\n          <stop stopColor=\"#801AB3\" stopOpacity={0} />\r\n          <stop offset={1} stopColor=\"#4C4CFF\" />\r\n        </radialGradient>\r\n        <radialGradient\r\n          id=\"prefix__paint2_radial\"\r\n          cx={0}\r\n          cy={0}\r\n          r={1}\r\n          gradientUnits=\"userSpaceOnUse\"\r\n          gradientTransform=\"rotate(136.146 16.302 36) scale(47.1499 35.4679)\"\r\n        >\r\n          <stop stopColor=\"#801AB3\" stopOpacity={0} />\r\n          <stop offset={1} stopColor=\"#4C4CFF\" stopOpacity={0.5} />\r\n        </radialGradient>\r\n      </defs>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default OrderDetailsIcon;\r\n","import React from 'react';\r\nimport { useAppSelector } from '../../services/types';\r\n\r\nimport styles from './order-details.module.css';\r\nimport OrderDetailsIcon from './order-details-icon';\r\n\r\nfunction OrderDetails() {\r\n  const { orderDetails } = useAppSelector((store) => store.cart);\r\n  const notesMain = orderDetails?.success ? 'Ваш заказ начали готовить' : 'Заказ не может быть выполнен';\r\n  const notesSec = orderDetails?.success ? 'Дождитесь готовности на орбитальной станции' : 'Обратитесь в поддержку';\r\n\r\n  return (\r\n    <section className={styles.info_section}>\r\n      <header className={styles.orderId}>{orderDetails?.order.number}</header>\r\n      <p className={styles.orderId_note}>идентификатор заказа</p>\r\n\r\n      <OrderDetailsIcon />\r\n\r\n      <p className={styles.common_notes_main}>{notesMain}</p>\r\n      <p className={styles.common_notes_sec}>{notesSec}</p>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default OrderDetails;\r\n","import React from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\n\r\nimport { CurrencyIcon, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './burger-constructor-total.module.css';\r\nimport Modal from '../../modal/modal';\r\nimport OrderDetails from '../../order-details/order-details';\r\n\r\nimport { ActionTypes } from '../../../services/actionTypes';\r\nimport { createOrder } from '../../../services/cart/actions';\r\n\r\nimport { useAppSelector, useAppDispatch } from '../../../services/types';\r\n\r\nfunction BurgerConstructorTotal() {\r\n  const dispatch = useAppDispatch();\r\n  const { bun, fillings, showOrderDetails } = useAppSelector((store) => store.cart);\r\n  const { loginSuccess } = useAppSelector((store) => store.user);\r\n  const { createOrderInProgress } = useAppSelector((store) => store.cart);\r\n\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const handleCreateNewOrder = () => {\r\n    if (!loginSuccess) {\r\n      history.replace({ pathname: '/login', state: { target: location } });\r\n      return;\r\n    }\r\n\r\n    dispatch(createOrder());\r\n  };\r\n\r\n  const closeModal = (e: React.MouseEvent | React.KeyboardEvent) => {\r\n    e.stopPropagation();\r\n    dispatch({ type: ActionTypes.CLOSE_ORDER });\r\n  };\r\n\r\n  const calcTotal = React.useMemo(\r\n    () => {\r\n      let result = 0;\r\n\r\n      if (bun) {\r\n        result += 2 * bun.price;\r\n      }\r\n\r\n      if (fillings.length > 0) {\r\n        result += fillings.reduce((acc, filling) => acc + filling.price, 0);\r\n      }\r\n\r\n      return result;\r\n    },\r\n    [bun, fillings],\r\n  );\r\n\r\n  return (\r\n    <section className={styles.constructor_total}>\r\n      <span>\r\n\r\n        {calcTotal}\r\n\r\n      </span>\r\n      <CurrencyIcon type=\"secondary\" />\r\n      <div className={styles.button_wrapper}>\r\n        { (bun && !createOrderInProgress)\r\n        && <Button onClick={handleCreateNewOrder}>Оформить заказ</Button> }\r\n        { createOrderInProgress\r\n        && <span className={styles.info_important}> Ожидайте подтверждения заказа </span> }\r\n        { showOrderDetails\r\n                    && (\r\n                    <Modal type=\"order\" onClose={closeModal}>\r\n                      <OrderDetails />\r\n                    </Modal>\r\n                    )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BurgerConstructorTotal;\r\n","import React from 'react';\r\nimport styles from './placeholder.module.css';\r\n\r\ninterface IProps {\r\n  children?: any\r\n}\r\n\r\nfunction Placeholder({ children }: IProps) {\r\n  return <p className={styles.placeholder}>{children}</p>;\r\n}\r\n\r\nexport default Placeholder;\r\n","import React, { ReactElement } from 'react';\r\nimport { useDrag, useDrop, DropTargetMonitor } from 'react-dnd';\r\n\r\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './burger-constructor-item.module.css';\r\n\r\nimport { removeIngredientFromCart, sortFillingsOrder, addIngredientToCart } from '../../../services/cart/actions';\r\nimport { useAppDispatch } from '../../../services/types';\r\nimport Placeholder from '../../placeholder/placeholder';\r\n\r\ninterface IBurgerConstructorItem {\r\n  type?: 'top' | 'bottom' | undefined;\r\n  index: number;\r\n  id: string;\r\n  text: string;\r\n  price: number;\r\n  thumbnail: string;\r\n  isLocked: boolean;\r\n}\r\n\r\ninterface IItem {\r\n  id: string;\r\n  index?: number;\r\n  type: 'bun' | 'filling' | 'sauce'\r\n}\r\n\r\nfunction BurgerConstructorItem({\r\n  type, index, id, text, price, thumbnail, isLocked,\r\n}: IBurgerConstructorItem): ReactElement {\r\n  const dispatch = useAppDispatch();\r\n  const refWrapper = React.useRef<HTMLDivElement>(null);\r\n  const refIngredient = React.useRef<HTMLDivElement>(null);\r\n\r\n  const isHoverOver = (monitor: DropTargetMonitor):boolean => {\r\n    if (!monitor.isOver()) return false;\r\n\r\n    const draggedItem: IItem = monitor.getItem();\r\n\r\n    if (draggedItem.type === 'bun') return false;\r\n\r\n    const draggedIndex = (!draggedItem.index && draggedItem.index !== 0) ? null : draggedItem.index;\r\n\r\n    // moving around an already added ingredient\r\n    if (draggedIndex !== null && draggedIndex >= 0 && draggedIndex === index) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const swapFillings = (item: any, monitor: any) => {\r\n    if (!isHoverOver(monitor)) return;\r\n\r\n    const dragIndex = item.index;\r\n    const hoverIndex = index;\r\n\r\n    if ((hoverIndex !== 0 && !hoverIndex) || dragIndex === hoverIndex) return;\r\n\r\n    dispatch(sortFillingsOrder(dragIndex, hoverIndex));\r\n    // eslint-disable-next-line no-param-reassign\r\n    monitor.getItem().index = hoverIndex;\r\n  };\r\n\r\n  const addNewFilling = (item: any, monitor: any) => {\r\n    if (!isHoverOver(monitor)) return;\r\n    const hoverIndex = index;\r\n\r\n    if (hoverIndex !== 0 && !hoverIndex) return;\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n    dispatch(addIngredientToCart(item.id, isDragUp ? hoverIndex : hoverIndex + 1));\r\n    // eslint-disable-next-line no-param-reassign\r\n    monitor.getItem().index = hoverIndex;\r\n  };\r\n\r\n  const isDraggingDown = (monitor: DropTargetMonitor):boolean => {\r\n    if (!isHoverOver(monitor)) return false;\r\n\r\n    /**\r\n     * When the dragged element crosses drop-target element for the 1st time,\r\n     * DnD fires event and calls isDraggingDown.\r\n     * When the pointer leaves current drop-target no event fires.\r\n     * At 1st time we define pointer direction and render \"empty placeholder\" in new position.\r\n     * After that re-render happens => wrapper container !== drop-target container.\r\n     * => We need to re-confirm direction of pointer.\r\n     */\r\n\r\n    const wrapperRect = refWrapper.current && refWrapper.current.getBoundingClientRect();\r\n    const dropTargetRect = refIngredient.current && refIngredient.current.getBoundingClientRect();\r\n\r\n    const dragCursorPos = monitor.getClientOffset();\r\n\r\n    if (!wrapperRect || !dropTargetRect || !dragCursorPos) return false;\r\n\r\n    if (wrapperRect.top === dropTargetRect.top && wrapperRect.bottom === dropTargetRect.bottom) {\r\n      // 1st render - before empty space is rendered\r\n      const distToTop = Math.abs(dragCursorPos.y - wrapperRect.top);\r\n      const distToBottom = Math.abs(dragCursorPos.y - wrapperRect.bottom);\r\n      return distToTop < distToBottom;\r\n    }\r\n    // 2nd render - after empty space is rendered\r\n    return wrapperRect.top === dropTargetRect.top;\r\n  };\r\n\r\n  const [{\r\n    isDragDown, isDragUp,\r\n  }, drop] = useDrop({\r\n    accept: ['fillings', 'ingredient'],\r\n    drop(item: any, monitor: DropTargetMonitor) {\r\n      if (monitor.getItemType() === 'fillings') {\r\n        swapFillings(item, monitor);\r\n      } else {\r\n        addNewFilling(item, monitor);\r\n      }\r\n    },\r\n    collect: (monitor) => {\r\n      const isDown = isDraggingDown(monitor);\r\n      return { isDragDown: isDown, isDragUp: isHoverOver(monitor) && !isDown };\r\n    },\r\n  });\r\n\r\n  const [{ isDragging }, drag] = useDrag({\r\n    type: 'fillings',\r\n    item: { id, index },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const removeIngredient = (ingredientKey: string) => {\r\n    dispatch(removeIngredientFromCart(ingredientKey));\r\n  };\r\n\r\n  const style = { cursor: 'grabbing' };\r\n  const opacity = isDragging ? 0 : 1;\r\n  drag(drop(refWrapper));\r\n\r\n  return (\r\n    <div ref={refWrapper}>\r\n      { isDragUp && <Placeholder /> }\r\n\r\n      <div\r\n        ref={refIngredient}\r\n        id={id}\r\n        className={styles.burgerIngredient}\r\n        style={{ ...style, opacity }}\r\n      >\r\n        <div className={styles.dragIcon}>\r\n          <DragIcon type=\"primary\" />\r\n        </div>\r\n        <ConstructorElement\r\n          type={type}\r\n          isLocked={isLocked}\r\n          text={text}\r\n          price={price}\r\n          thumbnail={thumbnail}\r\n          handleClose={() => removeIngredient(id)}\r\n        />\r\n      </div>\r\n\r\n      { isDragDown && <Placeholder /> }\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BurgerConstructorItem;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDrop } from 'react-dnd';\r\n\r\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './burger-constructor.module.css';\r\nimport BurgerConstructorTotal from './burger-constructor-total/burger-constructor-total';\r\nimport BurgerConstructorItem from './burger-constructor-item/burger-constructor-item';\r\nimport Placeholder from '../placeholder/placeholder';\r\n\r\nimport { addIngredientToCart } from '../../services/cart/actions';\r\n\r\nimport { useAppSelector, useAppDispatch } from '../../services/types';\r\n\r\ninterface IDropItem {\r\n  id: string;\r\n  type: string;\r\n}\r\n\r\nfunction BurgerConstructor() {\r\n  const dispatch = useAppDispatch();\r\n  const { bun, fillings } = useAppSelector((store) => store.cart);\r\n  const [cartHasItems, setCartHasItems] = useState<boolean>(false);\r\n  const [isBunAdded, setIsBunAdded] = useState<boolean>(false);\r\n\r\n  const [{ isOver, isBun }, dropTarget] = useDrop({\r\n    accept: 'ingredient',\r\n    drop(item: IDropItem) {\r\n      if (item.type === 'bun' || !fillings.length) {\r\n        dispatch(addIngredientToCart(item.id));\r\n      }\r\n    },\r\n    collect: (monitor) => ({\r\n      isOver: monitor.isOver(),\r\n      isBun: monitor.getItemType() === 'bun',\r\n    }),\r\n  });\r\n\r\n  const fillingsItems = fillings.map((filling, index) => (\r\n    <BurgerConstructorItem\r\n      key={filling.key}\r\n      index={index}\r\n      id={filling.key}\r\n      isLocked={false}\r\n      text={filling.name}\r\n      price={filling.price}\r\n      thumbnail={filling.image}\r\n    />\r\n  ));\r\n\r\n  useEffect(() => {\r\n    setCartHasItems(!!bun || fillings.length > 0);\r\n    setIsBunAdded(!!bun);\r\n  }, [bun, fillings.length]);\r\n\r\n  return (\r\n    <article className={styles.constructor_area} ref={dropTarget}>\r\n      { cartHasItems\r\n        ? (\r\n          <>\r\n            <div className={styles.main_area}>\r\n\r\n              { isBunAdded\r\n              && (\r\n                <ConstructorElement\r\n                  type=\"top\"\r\n                  isLocked\r\n                  text={`${bun!.name} (верх)`}\r\n                  price={bun!.price}\r\n                  thumbnail={bun!.image}\r\n                />\r\n              )}\r\n\r\n              <div className={styles.scrollable_area}>\r\n                {fillingsItems.length > 0 && fillingsItems}\r\n                {!fillingsItems.length && isOver && isBunAdded && !isBun && <Placeholder /> }\r\n              </div>\r\n\r\n              { isBunAdded\r\n              && (\r\n                <ConstructorElement\r\n                  type=\"bottom\"\r\n                  isLocked\r\n                  text={`${bun!.name} (низ)`}\r\n                  price={bun!.price}\r\n                  thumbnail={bun!.image}\r\n                />\r\n              )}\r\n\r\n            </div>\r\n            <BurgerConstructorTotal />\r\n          </>\r\n        )\r\n        : <Placeholder>Добавьте сюда ингредиенты</Placeholder>}\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default BurgerConstructor;\r\n","import React from 'react';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\n\r\nimport BurgerIngredients from '../components/burger-ingredients/burger-ingredients';\r\nimport BurgerConstructor from '../components/burger-constructor/burger-constructor';\r\n\r\nimport { useAppSelector } from '../services/types';\r\n\r\nfunction MainPage() {\r\n  const {\r\n    ingredientsLoad,\r\n    ingredientsLoadSuccess,\r\n    ingredientsLoadFailed,\r\n  } = useAppSelector((store) => store.ingredients);\r\n\r\n  return (\r\n    <>\r\n      { ingredientsLoad && <p>Данные загружаются</p> }\r\n      { ingredientsLoadFailed && <p>Ошибка загрузки данных</p>}\r\n      { ingredientsLoadSuccess\r\n        && (\r\n        <DndProvider backend={HTML5Backend}>\r\n          <BurgerIngredients />\r\n          <BurgerConstructor />\r\n        </DndProvider>\r\n        )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MainPage;\r\n","import React, { useMemo, ReactElement } from 'react';\r\nimport styles from './app-form.module.css';\r\n\r\ninterface IAppForm {\r\n  children?: any,\r\n  title?: string,\r\n  onSubmit?: (e: React.FormEvent) => void,\r\n  additionalStyles?: string[]\r\n}\r\n\r\nfunction AppForm({\r\n  children, title, onSubmit, additionalStyles,\r\n}: IAppForm): ReactElement {\r\n  const getFormStyles = useMemo(\r\n    () => {\r\n      const defaultStyles = [styles.centeredForm];\r\n      return additionalStyles\r\n        ? defaultStyles.concat(additionalStyles.map((style) => styles[style]))\r\n        : defaultStyles;\r\n    },\r\n    [additionalStyles],\r\n  );\r\n\r\n  return (\r\n    <form className={getFormStyles.join(' ')} onSubmit={onSubmit}>\r\n\r\n      { title && (\r\n      <header>\r\n        <h2 className={styles.title}>{title}</h2>\r\n      </header>\r\n      ) }\r\n\r\n      {children}\r\n\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default AppForm;\r\n","/* eslint-disable import/no-cycle */\r\nimport { refreshTokenName, accessTokenName, authEndpoints } from './constants';\r\n\r\nimport { getCookie, setCookie } from './cookie';\r\n\r\nconst serverRequest = (url: string, options: { [name: string]: any }) => fetch(url, options)\r\n  .then((res) => (res.ok ? res.json() : Promise.reject(res)))\r\n  .then((res) => (res.success ? res : Promise.reject(res)))\r\n  .catch(() => {\r\n    console.log('please authorize');\r\n  });\r\n\r\nexport const refreshToken = () => serverRequest(authEndpoints.tokenUrl, {\r\n  method: 'POST',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  body: JSON.stringify({ token: window.localStorage.getItem(refreshTokenName) }),\r\n})\r\n  .catch(() => { console.log('refresh token'); });\r\n\r\nexport const getProfileSettings = () => serverRequest(authEndpoints.userUrl, {\r\n  method: 'GET',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    Authorization: getCookie(accessTokenName),\r\n  },\r\n})\r\n  .catch(() => { console.log('profile setting'); });\r\n\r\n// eslint-disable-next-line max-len\r\nexport const updateProfileSettings = (updatedUserSettings: object) => serverRequest(authEndpoints.userUrl, {\r\n  method: 'PATCH',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    authorization: getCookie(accessTokenName),\r\n  },\r\n  body: JSON.stringify(updatedUserSettings),\r\n}).catch(() => { console.log('updateProfileSettings'); });\r\n\r\nexport const setToken = (data : { accessToken: string, refreshToken: string }) : void => {\r\n  setCookie(accessTokenName, data.accessToken, { expires: 20 * 60 });\r\n  window.localStorage.setItem(refreshTokenName, data.refreshToken);\r\n};\r\n","/* eslint-disable import/no-cycle */\r\nimport {\r\n  authEndpoints, passwordResetUrl, resetUrl, accessTokenName, refreshTokenName,\r\n} from '../../utils/constants';\r\nimport { setCookie, deleteCookie } from '../../utils/cookie';\r\n\r\nimport { ActionTypes } from '../actionTypes';\r\n\r\nimport {\r\n  getProfileSettings, updateProfileSettings, refreshToken, setToken,\r\n} from '../../utils/token';\r\nimport { AppThunk, AppDispatch } from '../types';\r\n\r\nexport interface IRegisterRequest {\r\n  readonly type: typeof ActionTypes.REGISTER_REQUEST;\r\n}\r\nexport interface IRegisterSuccess {\r\n  readonly type: typeof ActionTypes.REGISTER_SUCCESS;\r\n  readonly data: { [name : string]: string };\r\n}\r\nexport interface IRegisterFailed {\r\n  readonly type: typeof ActionTypes.REGISTER_FAILED;\r\n}\r\n\r\nexport interface ILoginRequest {\r\n  readonly type: typeof ActionTypes.LOGIN_REQUEST;\r\n}\r\nexport interface ILoginSuccess {\r\n  readonly type: typeof ActionTypes.LOGIN_SUCCESS;\r\n  readonly user: { [name: string]: string };\r\n}\r\nexport interface ILoginFailed {\r\n  readonly type: typeof ActionTypes.LOGIN_FAILED;\r\n}\r\n\r\nexport interface ILogoutRequest {\r\n  readonly type: typeof ActionTypes.LOGOUT_REQUEST;\r\n}\r\nexport interface ILogoutSuccess {\r\n  readonly type: typeof ActionTypes.LOGOUT_SUCCESS;\r\n}\r\nexport interface ILogoutFailed {\r\n  readonly type: typeof ActionTypes.LOGOUT_FAILED;\r\n}\r\n\r\nexport interface IPasswordResetCodeRequest {\r\n  readonly type: typeof ActionTypes.PASSWORD_RESET_CODE_REQUEST;\r\n}\r\nexport interface IPasswordResetCodeSuccess {\r\n  readonly type: typeof ActionTypes.PASSWORD_RESET_CODE_SUCCESS;\r\n}\r\nexport interface IPasswordResetCodeFailed {\r\n  readonly type: typeof ActionTypes.PASSWORD_RESET_CODE_FAILED;\r\n}\r\n\r\nexport interface IPasswordResetRequest {\r\n  readonly type: typeof ActionTypes.PASSWORD_RESET_REQUEST;\r\n}\r\nexport interface IPasswordResetSuccess {\r\n  readonly type: typeof ActionTypes.PASSWORD_RESET_SUCCESS;\r\n}\r\nexport interface IPasswordResetFailed {\r\n  readonly type: typeof ActionTypes.PASSWORD_RESET_FAILED;\r\n}\r\n\r\nexport interface IUserRefreshSuccess {\r\n  readonly type: typeof ActionTypes.USER_REFRESH_SUCCESS;\r\n  readonly user: { [name: string]: string };\r\n}\r\n\r\nexport type TUserActions = | IRegisterRequest\r\n| IRegisterSuccess\r\n| IRegisterFailed\r\n| ILoginRequest\r\n| ILoginSuccess\r\n| ILoginFailed\r\n| ILogoutRequest\r\n| ILogoutSuccess\r\n| ILogoutFailed\r\n| IPasswordResetCodeRequest\r\n| IPasswordResetCodeSuccess\r\n| IPasswordResetCodeFailed\r\n| IPasswordResetRequest\r\n| IPasswordResetSuccess\r\n| IPasswordResetFailed\r\n| IUserRefreshSuccess;\r\n\r\nexport const register: AppThunk = (\r\n  email: string,\r\n  password: string,\r\n  name: string,\r\n) => (dispatch: AppDispatch) => {\r\n  dispatch({ type: ActionTypes.REGISTER_REQUEST });\r\n\r\n  fetch(authEndpoints.registerUrl, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      email,\r\n      password,\r\n      name,\r\n    }),\r\n  })\r\n    .then((res) => (res.ok ? res.json() : Promise.reject(res)))\r\n    .then((res) => {\r\n      if (res.success) {\r\n        setCookie(accessTokenName, res.accessToken, { expires: 20 * 60 });\r\n        window.localStorage.setItem(refreshTokenName, res.refreshToken);\r\n        dispatch({\r\n          type: ActionTypes.REGISTER_SUCCESS,\r\n          data: { ...res, timeStamp: new Date() },\r\n        });\r\n      } else {\r\n        throw new Error('Registration failed');\r\n      }\r\n    })\r\n    .catch((res) => {\r\n    // TODO: error handling\r\n      console.log(`Registration failed${res}`);\r\n      dispatch({ type: ActionTypes.REGISTER_FAILED });\r\n    });\r\n};\r\n\r\nexport const login: AppThunk = (email: string, password: string) => (dispatch: AppDispatch) => {\r\n  dispatch({ type: ActionTypes.LOGIN_REQUEST });\r\n\r\n  fetch(authEndpoints.authUrl, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      email,\r\n      password,\r\n    }),\r\n  })\r\n    .then((res) => (res.ok ? res.json() : Promise.reject(res)))\r\n    .then((res) => {\r\n      if (res.success) {\r\n        setToken(res);\r\n        dispatch({ type: ActionTypes.LOGIN_SUCCESS, user: res.user });\r\n      } else {\r\n        throw new Error('Login failed');\r\n      }\r\n    })\r\n    .catch((res) => {\r\n      // TODO: error handling\r\n      console.log(`Login failed${res}`);\r\n      dispatch({ type: ActionTypes.LOGIN_FAILED });\r\n    });\r\n};\r\n\r\nexport const logout: AppThunk = () => (dispatch: AppDispatch) => {\r\n  dispatch({ type: ActionTypes.LOGOUT_REQUEST });\r\n\r\n  fetch(authEndpoints.logoutUrl, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      token: window.localStorage.getItem(refreshTokenName),\r\n    }),\r\n  })\r\n    .then((res) => (res.ok ? res.json() : Promise.reject(res)))\r\n    .then((res) => {\r\n      /*\r\n                {\r\n                    \"success\": true,\r\n                    \"message\": \"Successful logout\"\r\n                }\r\n            */\r\n      if (res.success) {\r\n        deleteCookie(accessTokenName);\r\n        window.localStorage.removeItem(refreshTokenName);\r\n        dispatch({ type: ActionTypes.LOGOUT_SUCCESS });\r\n      } else {\r\n        throw new Error('Logout failed');\r\n      }\r\n    })\r\n    .catch((res) => {\r\n      // TODO: error handling\r\n      console.log(`Logout failed${res}`);\r\n      dispatch({ type: ActionTypes.LOGOUT_FAILED });\r\n    });\r\n};\r\n\r\nexport const requestPasswordResetCode: AppThunk = (email: string) => (dispatch: AppDispatch) => {\r\n  dispatch({ type: ActionTypes.PASSWORD_RESET_CODE_REQUEST });\r\n\r\n  fetch(passwordResetUrl, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ email }),\r\n  })\r\n    .then((res) => (res.ok ? res.json() : Promise.reject(res)))\r\n    .then((res) => {\r\n      if (res.success) {\r\n        dispatch({ type: ActionTypes.PASSWORD_RESET_CODE_SUCCESS });\r\n      } else {\r\n        throw new Error('requestPasswordResetCode failed');\r\n      }\r\n    })\r\n    .catch((res) => {\r\n      console.log(`requestPasswordResetCode failed ${res}`);\r\n      dispatch({ type: ActionTypes.PASSWORD_RESET_CODE_FAILED });\r\n    });\r\n};\r\n\r\nexport const resetPassword: AppThunk = (\r\n  password: string,\r\n  verificationToken: string,\r\n) => (dispatch: AppDispatch) => {\r\n  dispatch({ type: ActionTypes.PASSWORD_RESET_REQUEST });\r\n\r\n  fetch(resetUrl, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      password,\r\n      token: verificationToken,\r\n    }),\r\n  })\r\n    .then((res) => (res.ok ? res.json() : Promise.reject(res)))\r\n    .then((res) => {\r\n      if (res.success) {\r\n        dispatch({ type: ActionTypes.PASSWORD_RESET_SUCCESS });\r\n      } else {\r\n        console.log('resetPassword failed');\r\n      }\r\n    })\r\n    .catch((res) => {\r\n      console.log(`resetPassword failed ${res}`);\r\n      dispatch({ type: ActionTypes.PASSWORD_RESET_FAILED });\r\n    });\r\n};\r\n\r\nexport const runServerRequest = (\r\n  dispatch: AppDispatch,\r\n  requestFunction:(f:any) => Promise<any>,\r\n  requestFunctionParams: object | undefined,\r\n) => {\r\n  requestFunction(requestFunctionParams)\r\n    .then((res) => {\r\n      dispatch({ type: ActionTypes.USER_REFRESH_SUCCESS, user: res.user });\r\n    })\r\n    .catch((res) => {\r\n      if (res.status === 401 || res.message === 'jwt expired') {\r\n        refreshToken().then((tokenRes) => {\r\n          setToken(tokenRes);\r\n\r\n          requestFunction(requestFunctionParams)\r\n            .then((repeatReqRes) => {\r\n              dispatch({ type: ActionTypes.USER_REFRESH_SUCCESS, user: repeatReqRes.user });\r\n            });\r\n        })\r\n          .catch(() => {\r\n            console.log('token didn\\'t refresh');\r\n          });\r\n      } else {\r\n        console.log('something went wrong with authorization: try re-login');\r\n      }\r\n    });\r\n};\r\n\r\nexport const refreshUser: AppThunk = () => (dispatch: AppDispatch) => {\r\n  runServerRequest(dispatch, getProfileSettings, undefined);\r\n};\r\n\r\nexport const updateUser: AppThunk = (updatedUserSettings: object) => (dispatch: AppDispatch) => {\r\n  runServerRequest(dispatch, updateProfileSettings, updatedUserSettings);\r\n};\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { EmailInput, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport AppForm from '../components/app-form/app-form';\r\nimport { login } from '../services/user/actions';\r\nimport styles from './index.module.css';\r\n\r\nimport { useAppDispatch } from '../services/types';\r\n\r\nfunction LoginPage() {\r\n  const dispatch = useAppDispatch();\r\n  const [credentials, setCredentials] = React.useState({ email: '', password: '' });\r\n\r\n  const onInputChange = (e: React.ChangeEvent) => {\r\n    const { name } = e.target as HTMLInputElement;\r\n    const { value } = e.target as HTMLInputElement;\r\n    setCredentials((prevVal) => ({ ...prevVal, [name]: value }));\r\n  };\r\n\r\n  const handleLogin = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    dispatch(login(credentials.email, credentials.password));\r\n  };\r\n\r\n  return (\r\n    <AppForm title=\"Вход\" onSubmit={handleLogin}>\r\n      <div className={styles.input}>\r\n        <EmailInput name=\"email\" value={credentials.email} onChange={onInputChange} />\r\n      </div>\r\n      <div className={styles.input}>\r\n        <PasswordInput name=\"password\" value={credentials.password} onChange={onInputChange} />\r\n      </div>\r\n      <div className={styles.button}><Button>Войти</Button></div>\r\n\r\n      <p className={styles.helpRedirect}>\r\n        Вы новый пользователь?\r\n        <Link to=\"/register\" className={styles.link}>Зарегистрироваться</Link>\r\n      </p>\r\n\r\n      <p className={styles.helpRedirect}>\r\n        Забыли пароль?\r\n        <Link to=\"/forgot-password\" className={styles.link}>Восстановить пароль</Link>\r\n      </p>\r\n\r\n    </AppForm>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n","import React, { useState } from 'react';\r\nimport { useHistory, Link } from 'react-router-dom';\r\nimport {\r\n  Input, EmailInput, PasswordInput, Button,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport AppForm from '../components/app-form/app-form';\r\nimport { register } from '../services/user/actions';\r\n\r\nimport styles from './index.module.css';\r\n\r\nimport { useAppSelector, useAppDispatch } from '../services/types';\r\n\r\nfunction RegisterPage() {\r\n  const dispatch = useAppDispatch();\r\n  const [registerInfo, setRegisterInfo] = useState({ name: '', email: '', password: '' });\r\n  const { registerSuccess } = useAppSelector((store) => store.user);\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    if (registerSuccess) {\r\n      history.push('/login');\r\n    }\r\n  }, [history, registerSuccess]);\r\n\r\n  const onChange = (e: React.ChangeEvent) => {\r\n    const elem = e.target as HTMLInputElement;\r\n    setRegisterInfo({ ...registerInfo, [elem.name]: elem.value });\r\n  };\r\n\r\n  const handleRegistration = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    dispatch(register(registerInfo.email, registerInfo.password, registerInfo.name));\r\n  };\r\n\r\n  return (\r\n    <AppForm title=\"Регистрация\" onSubmit={handleRegistration}>\r\n      <div className={styles.input}><Input type=\"text\" name=\"name\" placeholder=\"Имя\" value={registerInfo.name} onChange={onChange} /></div>\r\n      <div className={styles.input}><EmailInput name=\"email\" value={registerInfo.email} onChange={onChange} /></div>\r\n      <div className={styles.input}><PasswordInput name=\"password\" value={registerInfo.password} onChange={onChange} /></div>\r\n      <div className={styles.button}><Button>Зарегистрироваться</Button></div>\r\n\r\n      <p className={styles.helpRedirect}>\r\n        Уже зарегистрированы?\r\n        <Link to=\"/login\" className={styles.link}>Войти</Link>\r\n      </p>\r\n\r\n    </AppForm>\r\n  );\r\n}\r\n\r\nexport default RegisterPage;\r\n","import React from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport AppForm from '../components/app-form/app-form';\r\nimport { requestPasswordResetCode } from '../services/user/actions';\r\n\r\nimport styles from './index.module.css';\r\n\r\nimport { useAppSelector, useAppDispatch } from '../services/types';\r\n\r\nfunction ForgotPasswordPage(): React.ReactElement | null {\r\n  const dispatch = useAppDispatch();\r\n  const { passwordResetCodeSuccess } = useAppSelector((store) => store.user);\r\n  const history = useHistory();\r\n  const [email, setEmail] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    if (passwordResetCodeSuccess) {\r\n      history.replace({ pathname: '/reset-password' });\r\n    }\r\n  }, [passwordResetCodeSuccess, history]);\r\n\r\n  const onEmailUpdate = (e: React.SyntheticEvent) => {\r\n    setEmail((e.target as HTMLInputElement).value);\r\n  };\r\n\r\n  const handleRestoreEmail = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    dispatch(requestPasswordResetCode(email));\r\n  };\r\n\r\n  return (\r\n    <AppForm title=\"Восстановление пароля\" onSubmit={handleRestoreEmail}>\r\n      <div className={styles.input}>\r\n        <Input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Укажите e-mail\"\r\n          onChange={onEmailUpdate}\r\n          value={email}\r\n        />\r\n      </div>\r\n      <div className={styles.button}>\r\n        <Button>Восстановить</Button>\r\n      </div>\r\n\r\n      <p className={styles.helpRedirect}>\r\n        Вспомнили пароль?\r\n        <Link to=\"/login\" className={styles.link}>Войти</Link>\r\n      </p>\r\n\r\n    </AppForm>\r\n  );\r\n}\r\n\r\nexport default ForgotPasswordPage;\r\n","import React from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { PasswordInput, Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport AppForm from '../components/app-form/app-form';\r\nimport { resetPassword } from '../services/user/actions';\r\n\r\nimport styles from './index.module.css';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../services/types';\r\n\r\nfunction ResetPasswordPage() {\r\n  const history = useHistory();\r\n  const dispatch = useAppDispatch();\r\n  const { passwordResetCodeSuccess, passwordResetSuccess } = useAppSelector((store) => store.user);\r\n  const [resetData, setResetData] = React.useState({ password: '', verificationToken: '' });\r\n\r\n  React.useEffect(\r\n    () => {\r\n      if (!passwordResetCodeSuccess) {\r\n        history.replace({ pathname: './forgot-password' });\r\n      } else if (passwordResetSuccess) {\r\n        history.replace({ pathname: './login' });\r\n      }\r\n    },\r\n    [passwordResetCodeSuccess, passwordResetSuccess, history],\r\n  );\r\n\r\n  const onChange = (e: React.ChangeEvent) => {\r\n    const { name } = e.target as HTMLInputElement;\r\n    const { value } = e.target as HTMLInputElement;\r\n    setResetData({ ...resetData, [name]: value });\r\n  };\r\n\r\n  const handleResetPassword = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    dispatch(resetPassword(resetData.password, resetData.verificationToken));\r\n  };\r\n\r\n  return (\r\n    <AppForm title=\"Восстановление пароля\" onSubmit={handleResetPassword}>\r\n      <div className={styles.input}>\r\n        <PasswordInput onChange={onChange} name=\"password\" value={resetData.password} />\r\n      </div>\r\n      <div className={styles.input}>\r\n        <Input\r\n          type=\"text\"\r\n          onChange={onChange}\r\n          name=\"verificationToken\"\r\n          placeholder=\"Введите код из письма\"\r\n          value={resetData.verificationToken}\r\n        />\r\n      </div>\r\n      <div className={styles.button}>\r\n        <Button>Сохранить</Button>\r\n      </div>\r\n\r\n      <p className={styles.helpRedirect}>\r\n        Вспомнили пароль?\r\n        <Link to=\"/login\" className={styles.link}>Войти</Link>\r\n      </p>\r\n\r\n    </AppForm>\r\n  );\r\n}\r\n\r\nexport default ResetPasswordPage;\r\n","import React from 'react';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport styles from '../../pages/index.module.css';\r\nimport profileStyles from './profile-settings.module.css';\r\nimport { updateUser } from '../../services/user/actions';\r\n\r\nimport { useAppSelector, useAppDispatch } from '../../services/types';\r\n\r\nconst PASSWORD_PLACEHOLDER = '******';\r\n\r\ninterface IUserInfo {\r\n  name: string;\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\ninterface IUserInfoOptionalPassword {\r\n  name: string;\r\n  email: string;\r\n  password?: string;\r\n}\r\n\r\nfunction ProfileSettings() {\r\n  const dispatch = useAppDispatch();\r\n  const { name, email } = useAppSelector((store) => store.user);\r\n\r\n  // these are not application level data, therefore don't create separate action and reducer\r\n  const [user, setUser] = React.useState<IUserInfo>({\r\n    name,\r\n    email,\r\n    password: PASSWORD_PLACEHOLDER,\r\n  });\r\n\r\n  const updateField = (e: React.ChangeEvent) => {\r\n    const elem = e.target as HTMLInputElement;\r\n    setUser({ ...user, [elem.name]: elem.value });\r\n  };\r\n\r\n  const saveChanges = (e: React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n\r\n    const updatedFields: IUserInfoOptionalPassword = { name: user.name, email: user.email };\r\n\r\n    if (user.password && user.password.indexOf('*') < 0) {\r\n      updatedFields.password = user.password;\r\n    }\r\n    dispatch(updateUser(updatedFields));\r\n    setUser((prevState) => ({ ...prevState, password: PASSWORD_PLACEHOLDER }));\r\n  };\r\n\r\n  const cancelChanges = (e: React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    setUser({ name, email, password: PASSWORD_PLACEHOLDER });\r\n  };\r\n\r\n  return (\r\n    <article>\r\n      <div className={styles.input}>\r\n        <Input\r\n          type=\"text\"\r\n          onChange={updateField}\r\n          name=\"name\"\r\n          placeholder=\"Имя\"\r\n          icon=\"EditIcon\"\r\n          value={user.name}\r\n        />\r\n      </div>\r\n      <div className={styles.input}>\r\n        <Input\r\n          name=\"email\"\r\n          onChange={updateField}\r\n          icon=\"EditIcon\"\r\n          value={user.email}\r\n        />\r\n      </div>\r\n      <div className={styles.input}>\r\n        <Input\r\n          name=\"password\"\r\n          onChange={updateField}\r\n          placeholder=\"Пароль\"\r\n          icon=\"EditIcon\"\r\n          value={user.password}\r\n        />\r\n      </div>\r\n      <div className={profileStyles.buttonsArea}>\r\n        <Button type=\"primary\" size=\"medium\" onClick={saveChanges}> Сохранить </Button>\r\n        <div className={profileStyles.buttonSeparator}> </div>\r\n        <Button type=\"primary\" size=\"medium\" onClick={cancelChanges}> Отмена </Button>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default ProfileSettings;\r\n","import React from 'react';\r\n\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './price.module.css';\r\n\r\nexport type IPrice = {\r\n  price: number | string;\r\n};\r\n\r\nfunction Price({ price }: IPrice) {\r\n  return (\r\n    <div className={styles.price}>\r\n      <span className={styles.price_num}>{price}</span>\r\n      <CurrencyIcon type=\"primary\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Price;\r\n","import React from 'react';\r\nimport styles from './ingredient-icon-round.module.css';\r\n\r\ninterface IIngredientIconRoundProps {\r\n  image_mobile: string,\r\n  name: string,\r\n  customStyle: object\r\n}\r\n\r\nfunction IngredientIconRound({ image_mobile, name, customStyle }: IIngredientIconRoundProps) {\r\n  return (\r\n    <span className={styles.ingredientContainer} style={customStyle}>\r\n      <img src={image_mobile} alt={name} className={styles.ingredientImg} />\r\n    </span>\r\n  );\r\n}\r\n\r\nexport default IngredientIconRound;\r\n","const translationsRU = {\r\n  today: 'Сегодня',\r\n  yesterday: 'Вчера',\r\n  lessThanFiveDaysAgo: 'дня назад',\r\n  daysAgo: 'дней назад',\r\n};\r\n\r\nexport default translationsRU;\r\n","import translationsRU from '../vocabulary/ru';\r\n\r\nexport const MILLISECONDS_IN_MINUTE = 60 * 1000;\r\nexport const MILLISECONDS_IN_HOUR = 60 * MILLISECONDS_IN_MINUTE;\r\nexport const MILLISECONDS_IN_DAY = 24 * MILLISECONDS_IN_HOUR;\r\n\r\nexport class DateFormatter {\r\n  static getDate = (dateValue: string):Date => {\r\n    const date = new Date(dateValue);\r\n\r\n    if (!date) {\r\n      throw new Error(`Date couldn't be recognized: ${dateValue}`);\r\n    }\r\n\r\n    return date;\r\n  };\r\n\r\n  static getTime = (date: Date): string => {\r\n    const minutes = date.getMinutes();\r\n    return `${date.getHours()}:${minutes < 10 ? `0${minutes}` : minutes}`;\r\n  };\r\n\r\n  static getTZ = (date: Date):string => {\r\n    const offsetInHours = date.getTimezoneOffset() / 60;\r\n    return `i-GMT${offsetInHours < 0 ? '+' : '-'}${Math.abs(offsetInHours)}`;\r\n  };\r\n\r\n  static getDaysDiff = (date: Date):string => {\r\n    const now = new Date();\r\n\r\n    const cleanDate = new Date(date);\r\n    cleanDate.setHours(0, 0, 0, 0);\r\n\r\n    const cleanNow = new Date(now);\r\n    cleanNow.setHours(0, 0, 0, 0);\r\n\r\n    const diffInDays = (cleanNow.getTime() - cleanDate.getTime()) / MILLISECONDS_IN_DAY;\r\n\r\n    if (diffInDays > 7) {\r\n      return `${cleanDate.getDate()} ${cleanDate.getMonth()} ${cleanDate.getFullYear()}`;\r\n    }\r\n\r\n    if (diffInDays === 0) {\r\n      return translationsRU.today;\r\n    }\r\n\r\n    if (diffInDays === 1) {\r\n      return translationsRU.yesterday;\r\n    }\r\n\r\n    if (diffInDays < 5) {\r\n      return `${diffInDays} ${translationsRU.lessThanFiveDaysAgo}`;\r\n    }\r\n\r\n    return `${diffInDays} ${translationsRU.daysAgo}`;\r\n  };\r\n\r\n  static getRelativeFormat = (dateValue: string) => {\r\n    const date = DateFormatter.getDate(dateValue);\r\n    return `${DateFormatter.getDaysDiff(date)}, ${DateFormatter.getTime(date)} ${DateFormatter.getTZ(date)}`;\r\n  };\r\n}\r\n","// TODO: create class for order\r\n\r\nconst formatOrderNumber = (num: number): string => {\r\n  const MAX_CHART_NUM = 5;\r\n  const number = String(num);\r\n  const leadingZeroCount = MAX_CHART_NUM - number.length;\r\n  let prefix = '';\r\n  while (prefix.length < leadingZeroCount) {\r\n    prefix += '0';\r\n  }\r\n  return prefix + number;\r\n};\r\n\r\nexport default formatOrderNumber;\r\n","/* eslint-disable jsx-a11y/click-events-have-key-events */\r\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\r\n/* eslint-disable no-underscore-dangle */\r\nimport React from 'react';\r\n\r\nimport Price from '../price/price';\r\nimport IngredientIconRound from '../ingredient-icon-round/ingredient-icon-round';\r\nimport { DateFormatter } from '../../utils/date-formatter/date-formatter';\r\nimport formatOrderNumber from '../../utils/order';\r\n\r\nimport styles from './order-card.module.css';\r\n\r\nimport { useAppSelector, TOrder, TIngredient } from '../../services/types';\r\n\r\ninterface IOrderCardProps {\r\n  data: TOrder;\r\n  openModal: (_id: string) => void;\r\n}\r\n\r\nfunction OrderCard({\r\n  data: {\r\n    _id, updatedAt, name, ingredients, number,\r\n  }, openModal,\r\n}: IOrderCardProps) {\r\n  const ingredientsData = useAppSelector((store) => store.ingredients.items);\r\n  const numOfIngredientsInOrder = ingredients.length;\r\n  const MAX_NUM_OF_VISIBLE_ITEMS = 5;\r\n\r\n  const drawIngredientImage = (item: TIngredient, index: number) => {\r\n    const SHIFT_OF_IMAGES_PX = 50;\r\n\r\n    if (index < MAX_NUM_OF_VISIBLE_ITEMS) {\r\n      return (\r\n        <IngredientIconRound\r\n          key={index}\r\n          image_mobile={item.image_mobile}\r\n          name={item.name}\r\n          customStyle={{\r\n            left: `${index * SHIFT_OF_IMAGES_PX}px`,\r\n            zIndex: (numOfIngredientsInOrder - index),\r\n          }}\r\n        />\r\n\r\n      );\r\n    }\r\n    return (\r\n      <span\r\n        key={index}\r\n        className={styles.hiddenIngredientsReplacement}\r\n        style={{\r\n          left: `${(index - 1) * SHIFT_OF_IMAGES_PX}px`,\r\n          zIndex: (numOfIngredientsInOrder - index + 1),\r\n        }}\r\n      >\r\n        {`+${numOfIngredientsInOrder - MAX_NUM_OF_VISIBLE_ITEMS}`}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const images = ingredientsData\r\n    .filter((item) => ingredients.indexOf(item._id) >= 0)\r\n    // = means add extra placeholder for \"hidden\" ingredients\r\n    .filter((item, index) => index <= MAX_NUM_OF_VISIBLE_ITEMS)\r\n    .map(drawIngredientImage);\r\n\r\n  const price = ingredientsData\r\n    .filter((item) => ingredients.indexOf(item._id) >= 0)\r\n    .reduce(\r\n      (sum, ingredient) => sum + ingredient.price,\r\n      0,\r\n    );\r\n\r\n  const openOrderInfo = (e: React.MouseEvent) => {\r\n    const elem = e.target as Element;\r\n    if (elem.nodeName !== 'BUTTON') {\r\n      openModal(_id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <article className={styles.card} onClick={openOrderInfo}>\r\n      <p className={styles.topInfo}>\r\n        <span className={styles.id}>{`#${formatOrderNumber(number)}`}</span>\r\n        <span className={styles.timestamp}>{DateFormatter.getRelativeFormat(updatedAt)}</span>\r\n      </p>\r\n      <header className={styles.title}>\r\n\r\n        {name}\r\n\r\n      </header>\r\n      <div className={styles.bottomInfo}>\r\n        <div className={styles.ingredients}>{images}</div>\r\n        <Price price={price} />\r\n      </div>\r\n    </article>\r\n\r\n  );\r\n}\r\n\r\nexport default OrderCard;\r\n","/* eslint-disable no-underscore-dangle */\r\nimport React, { useState } from 'react';\r\nimport {\r\n  useRouteMatch, Link, useLocation, useHistory,\r\n} from 'react-router-dom';\r\n\r\nimport styles from './feed-list.module.css';\r\nimport OrderCard from '../order-card/order-card';\r\n// eslint-disable-next-line import/no-cycle\r\nimport { OrderInfoPage } from '../../pages';\r\nimport Modal from '../modal/modal';\r\n\r\nimport { TOrder } from '../../services/types/index';\r\n\r\ninterface IFeedListProps {\r\n  owner?: 'profile';\r\n  data: {\r\n    orders: Array<TOrder>\r\n  }\r\n}\r\n\r\nfunction FeedList({ owner, data }: IFeedListProps) {\r\n  const [showOrderInfo, setShowOrderInfo] = useState(false);\r\n  const [activeOrder, setActiveOrder] = useState<string | null>(null);\r\n\r\n  const { orders } = data;\r\n\r\n  const { url } = useRouteMatch();\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const fallbackMsg = owner === 'profile' ? 'Вы ещё ничего не заказывали' : 'Грузим данные';\r\n\r\n  const openModal = (id: string) => {\r\n    setShowOrderInfo(true);\r\n    setActiveOrder(id);\r\n  };\r\n\r\n  const closeModal = (e: React.MouseEvent | React.KeyboardEvent) => {\r\n    e.stopPropagation();\r\n    setShowOrderInfo(false);\r\n    setActiveOrder(null);\r\n    history.goBack();\r\n  };\r\n\r\n  return (\r\n    <article className={owner === 'profile' ? styles.orders__profile : styles.orders}>\r\n      {\r\n            orders.length > 0\r\n              ? orders.map((order) => (\r\n                <Link key={order._id} to={{ pathname: `${url}/${order._id}`, state: { background: location } }} className={styles.link}>\r\n                  <OrderCard data={order} openModal={openModal} />\r\n                </Link>\r\n              ))\r\n              : <p>{ fallbackMsg }</p>\r\n            }\r\n\r\n      { showOrderInfo\r\n                && (\r\n                <Modal type=\"orderInfo\" onClose={closeModal}>\r\n                  <OrderInfoPage activeOrder={activeOrder} />\r\n                </Modal>\r\n                )}\r\n\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default FeedList;\r\n","/* eslint-disable react/jsx-no-useless-fragment */\r\nimport React from 'react';\r\nimport { Switch, NavLink, useLocation } from 'react-router-dom';\r\nimport ProfileSettings from '../components/profile-settings/profile-settings';\r\n\r\nimport AppForm from '../components/app-form/app-form';\r\n// eslint-disable-next-line import/no-cycle\r\nimport FeedList from '../components/feed-list/feed-list';\r\nimport RouteForAuthorizedUsers from '../components/route-auth-users/route-auth-users';\r\nimport { logout } from '../services/user/actions';\r\nimport { socketType } from '../utils/constants';\r\n\r\nimport styles from './profile.module.css';\r\n\r\nimport { useAppSelector, useAppDispatch } from '../services/types';\r\n\r\nfunction ProfilePage() {\r\n  const dispatch = useAppDispatch();\r\n  const { loginSuccess } = useAppSelector((store) => store.user);\r\n  const { data } = useAppSelector((store) => store.orders[socketType.personalOrders]);\r\n\r\n  const { pathname } = useLocation();\r\n\r\n  const profileMenuItems = React.useMemo(\r\n    () => {\r\n      const exitHandler = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        dispatch(logout());\r\n      };\r\n\r\n      return [\r\n        { to: '/profile', label: 'Профиль', infoText: 'В этом разделе вы можете изменить свои персональные данные' },\r\n        { to: '/profile/orders', label: 'История заказов', infoText: 'В этом разделе вы можете просмотреть свою историю заказов' },\r\n        { to: '', onClickHandler: exitHandler, label: 'Выход' },\r\n      ];\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const infoText = React.useMemo(\r\n    () => {\r\n      const currentMenuItem = profileMenuItems.find((item) => item.to === pathname);\r\n      return currentMenuItem ? currentMenuItem.infoText : '';\r\n    },\r\n    [pathname, profileMenuItems],\r\n  );\r\n\r\n  return (\r\n    <>\r\n      { loginSuccess && (\r\n      <AppForm additionalStyles={['profileForm']}>\r\n\r\n        <section className={styles.profileNav}>\r\n          <ul>\r\n            {\r\n              profileMenuItems.map((item) => (\r\n                <li key={item.to}>\r\n                  <NavLink\r\n                    to={item.to}\r\n                    exact\r\n                    onClick={item.onClickHandler}\r\n                    className={styles.profileNavItem}\r\n                    activeClassName=\"nav_link-active\"\r\n                  >\r\n\r\n                    {item.label}\r\n\r\n                  </NavLink>\r\n                </li>\r\n              ))\r\n            }\r\n          </ul>\r\n          <p className={styles.profileInfo}>{infoText}</p>\r\n        </section>\r\n\r\n        <section>\r\n          <Switch>\r\n            {data && (\r\n            <RouteForAuthorizedUsers exact path=\"/profile/orders\">\r\n\r\n              <FeedList owner=\"profile\" data={data} />\r\n\r\n            </RouteForAuthorizedUsers>\r\n            ) }\r\n            <RouteForAuthorizedUsers exact path=\"/profile\">\r\n\r\n              <ProfileSettings />\r\n\r\n            </RouteForAuthorizedUsers>\r\n          </Switch>\r\n        </section>\r\n\r\n      </AppForm>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProfilePage;\r\n","import React from 'react';\r\n\r\nfunction NotFoundPage() {\r\n  return (\r\n    <p> 404 Not Found</p>\r\n  );\r\n}\r\n\r\nexport default NotFoundPage;\r\n","/* eslint-disable no-underscore-dangle */\r\nimport React from 'react';\r\nimport styles from './orderid-list.module.css';\r\nimport formatOrderNumber from '../../../utils/order';\r\nimport { TOrder } from '../../../services/types/index';\r\n\r\ninterface IOrderIDListProps {\r\n  orders: Array<TOrder>;\r\n  title: string;\r\n  type?: 'green';\r\n}\r\n\r\nfunction OrderIDList({ orders, title, type }: IOrderIDListProps) {\r\n  const drawOrderItem = (item:TOrder) => (\r\n    <li key={item._id} className={styles.listItem}>{formatOrderNumber(item.number)}</li>);\r\n\r\n  return (\r\n    <section className={styles.orderList}>\r\n      <header className={styles.listTitle}>{title}</header>\r\n      <ul className={styles[`itemColor_${type}`]}>\r\n        {\r\n                    orders.map(drawOrderItem)\r\n                }\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default OrderIDList;\r\n","import React from 'react';\r\nimport styles from './feed-info.module.css';\r\n\r\ninterface IFeedInfoProps {\r\n  label: string;\r\n  value: number;\r\n}\r\n\r\nfunction FeedInfo({ label, value }: IFeedInfoProps) {\r\n  return (\r\n    <section>\r\n      <header className={styles.label}>{label}</header>\r\n      <span className={styles.value}>{value}</span>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default FeedInfo;\r\n","import React from 'react';\r\n\r\nimport OrderIDList from './orderid-list/order-id-list';\r\nimport FeedInfo from './feed-info/feed-info';\r\nimport { socketType } from '../../utils/constants';\r\n\r\nimport styles from './feed-overview.module.css';\r\n\r\nimport { useAppSelector, TOrder } from '../../services/types';\r\n\r\nconst MAX_NUM_OF_VISIBLE_ORDERS = 10;\r\n\r\nfunction FeedOverview() {\r\n  const { data } = useAppSelector((store) => store.orders[socketType.allOrders]);\r\n\r\n  const orders = (data && data.orders) || [];\r\n  const total = (data && data.total) || 0;\r\n  const totalToday = (data && data.totalToday) || 0;\r\n\r\n  const readyOrders = orders.filter((item: TOrder, index: number) => item.status === 'done' && index < MAX_NUM_OF_VISIBLE_ORDERS);\r\n  const inProgressOrders = orders.filter((item: TOrder, index: number) => item.status === 'inprogress' && index < MAX_NUM_OF_VISIBLE_ORDERS);\r\n\r\n  return (\r\n\r\n    <section className={styles.overview}>\r\n\r\n      <article className={styles.content}>\r\n\r\n        <div className={styles.contentRow}>\r\n          <div className={styles.contentRow__item}>\r\n\r\n            <OrderIDList orders={readyOrders} title=\"Готовы\" type=\"green\" />\r\n\r\n          </div>\r\n          <div className={styles.contentRow__item}>\r\n\r\n            <OrderIDList orders={inProgressOrders} title=\"В работе\" />\r\n\r\n          </div>\r\n        </div>\r\n\r\n        <div className={styles.contentRow}>\r\n\r\n          <FeedInfo label=\"Выполнено за все время:\" value={total} />\r\n\r\n        </div>\r\n        <div className={styles.contentRow}>\r\n\r\n          <FeedInfo label=\"Выполнено за сегодня:\" value={totalToday} />\r\n\r\n        </div>\r\n\r\n      </article>\r\n\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default FeedOverview;\r\n","/* eslint-disable react/jsx-no-useless-fragment */\r\nimport React from 'react';\r\n\r\n// eslint-disable-next-line import/no-cycle\r\nimport FeedList from '../components/feed-list/feed-list';\r\nimport FeedOverview from '../components/feed-overview/feed-overview';\r\nimport { socketType } from '../utils/constants';\r\n\r\nimport styles from './feed.module.css';\r\n\r\nimport { useAppSelector } from '../services/types';\r\n\r\nfunction FeedPage(): React.ReactElement | null {\r\n  const { data } = useAppSelector((store) => store.orders[socketType.allOrders]);\r\n\r\n  return (\r\n    <>\r\n      {\r\n      data\r\n        ? (\r\n          <article className={styles.page}>\r\n            <header>\r\n              <h2 className={styles.title}>Лента заказов</h2>\r\n            </header>\r\n\r\n            <section className={styles.contentArea}>\r\n              <FeedList data={data} />\r\n              <FeedOverview />\r\n            </section>\r\n          </article>\r\n        )\r\n        : <></>\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FeedPage;\r\n","/* eslint-disable no-underscore-dangle */\r\nimport React from 'react';\r\nimport { useParams, useLocation } from 'react-router-dom';\r\n\r\nimport styles from './order-info.module.css';\r\nimport formatOrderNumber from '../utils/order';\r\nimport { DateFormatter } from '../utils/date-formatter/date-formatter';\r\nimport { socketType } from '../utils/constants';\r\n\r\nimport Price from '../components/price/price';\r\nimport IngredientIconRound from '../components/ingredient-icon-round/ingredient-icon-round';\r\nimport { useAppSelector, TOrder, TIngredient } from '../services/types';\r\n\r\nconst orderStatusTranslations: { [name:string]: string } = {\r\n  done: 'Выполнен',\r\n  inprogress: 'В работе',\r\n  cancelled: 'Отменён',\r\n};\r\n\r\ninterface IOrderInfoPageProps {\r\n  activeOrder?: string | null;\r\n}\r\n\r\nfunction OrderInfoPage({ activeOrder }: IOrderInfoPageProps) {\r\n  let { id } = useParams<{ id: string | undefined }>();\r\n  const location = useLocation();\r\n  const ingredientsData = useAppSelector((store) => store.ingredients.items);\r\n  const { data } = useAppSelector((store) => store.orders[location.pathname.indexOf('/feed') >= 0 ? socketType.allOrders : socketType.personalOrders]);\r\n  const orders = data && data.orders;\r\n\r\n  if (!orders) {\r\n    return <>Loading</>;\r\n  }\r\n\r\n  if ((id === null || id === undefined) && activeOrder) {\r\n    id = activeOrder;\r\n  }\r\n\r\n  const [order] = orders.filter((item:TOrder) => item._id === id);\r\n\r\n  const getOrderContent = (ingredientsInfo: TIngredient[], orderInfo:TOrder) => {\r\n    const ingredientsInOrder = ingredientsInfo\r\n      .filter((item:TIngredient) => orderInfo.ingredients.indexOf(item._id) >= 0);\r\n\r\n    const ingredientCounts = orderInfo.ingredients\r\n      .reduce((counts: { [name: string] : number }, item: string) => {\r\n        // eslint-disable-next-line no-param-reassign\r\n        counts[item] = counts[item] ? counts[item] + 1 : 1;\r\n        return counts;\r\n      }, {});\r\n\r\n    return ingredientsInOrder.map((item) => (\r\n      <li key={item._id} className={styles.ingredientInOrder}>\r\n        <IngredientIconRound name={item.name} image_mobile={item.image_mobile} customStyle={{ position: 'relative' }} />\r\n        <span className={styles.ingredientInOrderName}>\r\n\r\n          {item.name}\r\n\r\n        </span>\r\n        <Price price={`${ingredientCounts[item._id]} x ${item.price}`} />\r\n      </li>\r\n    ));\r\n  };\r\n\r\n  const price = ingredientsData\r\n    .filter((item) => order.ingredients.indexOf(item._id) >= 0)\r\n    .reduce((sum, ingredient) => (sum + ingredient.price), 0);\r\n\r\n  return (\r\n    <article className={activeOrder ? styles.cardInModal : styles.card}>\r\n      <header>\r\n        <p className={styles.id}>{`#${formatOrderNumber(order.number)}`}</p>\r\n        <h2 className={styles.title}>\r\n\r\n          {order.name}\r\n\r\n        </h2>\r\n        <p className={styles[`status_${order.status}`]}>\r\n\r\n          {orderStatusTranslations[order.status]}\r\n\r\n        </p>\r\n      </header>\r\n\r\n      <section className={styles.content}>\r\n        <p className={styles.contentTitle}>Состав:</p>\r\n        <ul className={styles.ingredients}>\r\n\r\n          { getOrderContent(ingredientsData, order) }\r\n\r\n        </ul>\r\n      </section>\r\n\r\n      <footer className={styles.footer}>\r\n        <span className={styles.timestamp}>{DateFormatter.getRelativeFormat(order.updatedAt)}</span>\r\n        <Price price={price} />\r\n      </footer>\r\n\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default OrderInfoPage;\r\n","const throttle = (cb: (args: any) => any, interval: number = 250) => {\r\n  let lastCall: number;\r\n\r\n  return (args: any) => {\r\n    const now: number = Number(new Date());\r\n    if (lastCall && now - lastCall < interval) return;\r\n\r\n    cb(args);\r\n    lastCall = now;\r\n  };\r\n};\r\n\r\nexport default throttle;\r\n","import { useState, useEffect } from 'react';\r\nimport { MILLISECONDS_IN_MINUTE } from '../utils/date-formatter/date-formatter';\r\nimport throttle from '../utils/throttle';\r\n\r\nconst useIdleTimeout = (timeout: number = 1 * MILLISECONDS_IN_MINUTE): boolean => {\r\n  const [isActive, setIsActive] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const trackedEvents = [\r\n      'load',\r\n      'mousemove', 'mousedown', 'click', 'scroll',\r\n      'keypress',\r\n      'touchcancel', 'touchend', 'touchmove', 'touchstart',\r\n    ];\r\n    const timers: { [key: string]: NodeJS.Timeout } = {};\r\n\r\n    const eventHandler = throttle((event: string) => {\r\n      setIsActive(true);\r\n      if (timers[event]) {\r\n        clearTimeout(timers[event]);\r\n      }\r\n      timers[event] = setTimeout(() => setIsActive(false), timeout);\r\n    }, MILLISECONDS_IN_MINUTE);\r\n\r\n    trackedEvents.forEach((event) => window.addEventListener(event, () => {\r\n      eventHandler(event);\r\n    }));\r\n  }, [timeout]);\r\n\r\n  return isActive;\r\n};\r\n\r\nexport default useIdleTimeout;\r\n","import React from 'react';\r\nimport {\r\n  Route, Switch, useLocation, useHistory,\r\n} from 'react-router-dom';\r\n\r\nimport { useAppSelector, useAppDispatch, ILocation } from '../../services/types';\r\n\r\nimport './app.css';\r\n\r\nimport AppHeader from '../app-header/app-header';\r\nimport RouteForAuthorizedUsers from '../route-auth-users/route-auth-users';\r\nimport RouteForUnauthorizedUsers from '../route-unauth-users/route-unauth-users';\r\nimport {\r\n  MainPage,\r\n  LoginPage,\r\n  RegisterPage,\r\n  ForgotPasswordPage,\r\n  ResetPasswordPage,\r\n  ProfilePage,\r\n  FeedPage,\r\n  NotFoundPage,\r\n  OrderInfoPage,\r\n} from '../../pages';\r\nimport IngredientDetails from '../ingredient-details/ingredient-details';\r\n\r\nimport { getIngredientData } from '../../services/ingredients/actions';\r\nimport { refreshUser, logout } from '../../services/user/actions';\r\nimport { ActionTypes } from '../../services/actionTypes';\r\n\r\nimport useIdleTimeout from '../../hooks/useIdleTimeout';\r\nimport { MILLISECONDS_IN_MINUTE } from '../../utils/date-formatter/date-formatter';\r\n\r\nfunction App() {\r\n  const dispatch = useAppDispatch();\r\n  const { ingredientsLoadSuccess } = useAppSelector((store) => store.ingredients);\r\n  const { loginSuccess } = useAppSelector((store) => store.user);\r\n  const isUserActive = useIdleTimeout(MILLISECONDS_IN_MINUTE * 15);\r\n\r\n  const location = useLocation<ILocation>();\r\n  const history = useHistory();\r\n  const background = history.action === 'PUSH' && location.state && location.state.background;\r\n\r\n  React.useEffect(() => {\r\n    dispatch(getIngredientData());\r\n    dispatch(refreshUser());\r\n    dispatch({ type: ActionTypes.wsAllOrders.wsInit });\r\n  }, [dispatch]);\r\n\r\n  React.useEffect(() => {\r\n    if (loginSuccess) {\r\n      dispatch({ type: ActionTypes.wsUserOrders.wsInit });\r\n    }\r\n  }, [dispatch, loginSuccess]);\r\n\r\n  React.useEffect(() => {\r\n    if (loginSuccess && !isUserActive) {\r\n      dispatch(logout());\r\n    }\r\n  }, [dispatch, isUserActive, loginSuccess]);\r\n\r\n  if (!ingredientsLoadSuccess) {\r\n    return <p> Данные загружаются </p>;\r\n  }\r\n\r\n  return (\r\n\r\n    <>\r\n      <AppHeader />\r\n      <main>\r\n        <Switch location={background || location}>\r\n\r\n          <Route exact path=\"/\"><MainPage /></Route>\r\n          <Route exact path=\"/ingredients/:id\"><IngredientDetails /></Route>\r\n          <Route exact path=\"/feed/:id\"><OrderInfoPage /></Route>\r\n          <Route exact path=\"/feed\"><FeedPage /></Route>\r\n          <RouteForAuthorizedUsers exact path=\"/profile/orders/:id\"><OrderInfoPage /></RouteForAuthorizedUsers>\r\n          <RouteForAuthorizedUsers path=\"/profile\"><ProfilePage /></RouteForAuthorizedUsers>\r\n          <RouteForUnauthorizedUsers exact path=\"/login\"><LoginPage /></RouteForUnauthorizedUsers>\r\n          <RouteForUnauthorizedUsers exact path=\"/register\"><RegisterPage /></RouteForUnauthorizedUsers>\r\n          <RouteForUnauthorizedUsers exact path=\"/forgot-password\"><ForgotPasswordPage /></RouteForUnauthorizedUsers>\r\n          <RouteForUnauthorizedUsers exact path=\"/reset-password\"><ResetPasswordPage /></RouteForUnauthorizedUsers>\r\n          <Route path=\"/notfound\"><NotFoundPage /></Route>\r\n\r\n        </Switch>\r\n\r\n      </main>\r\n    </>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","/* eslint-disable import/no-cycle */\r\nimport { dataUrl } from '../../utils/constants';\r\n\r\nimport { ActionTypes } from '../actionTypes';\r\nimport { TIngredient, AppThunk, AppDispatch } from '../types';\r\n\r\nexport interface IGetIngredientsRequest {\r\n  readonly type: typeof ActionTypes.GET_INGREDIENTS_REQUEST;\r\n}\r\n\r\nexport interface IGetIngredientsSuccess {\r\n  readonly type: typeof ActionTypes.GET_INGREDIENTS_SUCCESS;\r\n  readonly data: Array<TIngredient>;\r\n}\r\n\r\nexport interface IGetIngredientsFailed {\r\n  readonly type: typeof ActionTypes.GET_INGREDIENTS_FAILED;\r\n}\r\n\r\nexport interface IShowIngredientsDetails {\r\n  readonly type: typeof ActionTypes.SHOW_INGREDIENT_DETAILS;\r\n  readonly value: boolean;\r\n}\r\n\r\nexport interface ISetActiveIngredient {\r\n  readonly type: typeof ActionTypes.SET_ACTIVE_INGREDIENT;\r\n  readonly value: TIngredient;\r\n}\r\n\r\nexport type TIngredientActions =\r\n| IGetIngredientsRequest\r\n| IGetIngredientsSuccess\r\n| IGetIngredientsFailed\r\n| IShowIngredientsDetails\r\n| ISetActiveIngredient;\r\n\r\nexport const getIngredientData: AppThunk = () => (dispatch: AppDispatch) => {\r\n  dispatch({ type: ActionTypes.GET_INGREDIENTS_REQUEST });\r\n\r\n  fetch(dataUrl)\r\n    .then((res) => (res.ok ? res.json() : Promise.reject(res.statusText)))\r\n    .then((res) => {\r\n      dispatch({ type: ActionTypes.GET_INGREDIENTS_SUCCESS, data: res.data });\r\n    })\r\n    .catch(() => {\r\n      dispatch({ type: ActionTypes.GET_INGREDIENTS_FAILED });\r\n    });\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nimport './index.css';\r\nimport { store } from './services/store';\r\nimport App from './components/app/app';\r\n\r\nconst baseUrl = process.env.NODE_ENV === 'development' ? '/' : '/react-burger';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <BrowserRouter basename={baseUrl}>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"order-card_card__175v_ p-6 mb-4\",\"topInfo\":\"order-card_topInfo__1A2ik\",\"bottomInfo\":\"order-card_bottomInfo__2rF-X\",\"id\":\"order-card_id__kLSxL text text_type_main-default\",\"timestamp\":\"order-card_timestamp__FMQlz text text_type_main-default\",\"title\":\"order-card_title__2xCLX mt-6 mb-6 text text_type_main-default\",\"ingredients\":\"order-card_ingredients__3Sefe\",\"hiddenIngredientsReplacement\":\"order-card_hiddenIngredientsReplacement__jjqBO text text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details_section\":\"ingredient-details_details_section__3Cbkv pt-10 pr-10 pb-15 pl-10\",\"details_header\":\"ingredient-details_details_header__3AXfj text text_type_main-large\",\"details_title\":\"ingredient-details_details_title__3GO_I pt-4 pb-8 text text_type_main-medium\",\"nutrition_info\":\"ingredient-details_nutrition_info__38kS9 text text_type_main-default text_color_inactive\",\"nutrition_item\":\"ingredient-details_nutrition_item__1fu_K mr-5\",\"nutrition_val\":\"ingredient-details_nutrition_val__3OptT text text_type_digits-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overview\":\"feed-overview_overview__3gVzS ml-5 mr-5 pr-2\",\"allOrdersSection\":\"feed-overview_allOrdersSection__2lOqH pt-15 pb-15\",\"contentRow\":\"feed-overview_contentRow__3Prv0 mb-15\",\"contentRow__item\":\"feed-overview_contentRow__item__2ZeEs pr-9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"ingredient_card__2qFBx pl-4 mb-8 mr-3\",\"image\":\"ingredient_image__M-Bt8 mr-4 ml-4\",\"price\":\"ingredient_price__2Hhk1 pt-1 pb-1\",\"price_num\":\"ingredient_price_num__3aZ16 pr-1 text text_type_digits-default\",\"name\":\"ingredient_name__273ZL text text_type_main-default\",\"add_btn\":\"ingredient_add_btn__1D5Qp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info_section\":\"order-details_info_section__29AgM mt-30 mb-30\",\"orderId\":\"order-details_orderId__3wL5c text text_type_digits-large pr-25 pl-25\",\"orderId_note\":\"order-details_orderId_note__3dDP9 text text_type_main-default pt-8 pb-15\",\"common_notes_main\":\"order-details_common_notes_main__2dFTI pt-15 pb-2 text text_type_main-default\",\"common_notes_sec\":\"order-details_common_notes_sec__3KIhB text text_type_main-default text_color_inactive\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav_item\":\"nav-item_nav_item__2nfy_ text text_type_main-default pl-5 pr-5 mt-4 mb-4\",\"profile_item\":\"nav-item_profile_item__l3Yhz nav-item_nav_item__2nfy_ text text_type_main-default pl-5 pr-5 mt-4 mb-4\",\"logo_desktop_item\":\"nav-item_logo_desktop_item__1nH6W nav-item_nav_item__2nfy_ text text_type_main-default pl-5 pr-5 mt-4 mb-4\",\"nav_link\":\"nav-item_nav_link__1b7ij\",\"nav_link_active\":\"nav-item_nav_link_active__p3un8 nav-item_nav_link__1b7ij\",\"link_text\":\"nav-item_link_text__vPgPA pl-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listTitle\":\"orderid-list_listTitle__3h7pB text text_type_main-medium pb-6\",\"listItem\":\"orderid-list_listItem__1y0NA text text_type_main-default pt-1 pb-1\",\"list\":\"orderid-list_list__2Nt07\",\"itemColor_green\":\"orderid-list_itemColor_green__3zQ8c orderid-list_list__2Nt07\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"burger-ingredients_ingredients__3WCxa ml-5 mr-5\",\"title\":\"burger-ingredients_title__3Bmxo text text_type_main-large pt-10 pb-5\",\"ingredient_groups\":\"burger-ingredients_ingredient_groups__1uV5c pt-10\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"ingredient-group_ingredients__1WGNS pt-6 mb-2 pl-4\",\"title\":\"ingredient-group_title__2rjbP text text_type_main-medium\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor_area\":\"burger-constructor_constructor_area__2tkO6 pt-25 ml-5 mr-5\",\"main_area\":\"burger-constructor_main_area__1SztS\",\"emptyConstructor\":\"burger-constructor_emptyConstructor__3CsIW m-10 p-10 text text_type_main-default\",\"scrollable_area\":\"burger-constructor_scrollable_area__2Hv6d burger-constructor_main_area__1SztS pr-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor_total\":\"burger-constructor-total_constructor_total__1l9bo mt-10 text text_type_digits-medium\",\"button_wrapper\":\"burger-constructor-total_button_wrapper__h8HbX ml-10\",\"info_important\":\"burger-constructor-total_info_important__6cwlR text text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"centeredForm\":\"app-form_centeredForm__2AjJ5\",\"profileForm\":\"app-form_profileForm__2gDfq\",\"title\":\"app-form_title__1PPyZ pb-6 text text_type_main-medium\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orders\":\"feed-list_orders__3qQZ4 ml-5 mr-5 pr-2\",\"orders__profile\":\"feed-list_orders__profile__RiHiZ feed-list_orders__3qQZ4 ml-5 mr-5 pr-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileNav\":\"profile_profileNav__2LcJ6 mr-15\",\"profileNavItem\":\"profile_profileNavItem__kOb3f text text_type_main-medium\",\"profileInfo\":\"profile_profileInfo__2XZxm mt-20 text text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"feed_title__1BBPB text text_type_main-large pt-10 pb-5 ml-5 mr-5\",\"contentArea\":\"feed_contentArea__1GtPG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"pages_input__ttxp3 mb-6\",\"button\":\"pages_button__23pFs mt-6 mb-20\",\"helpRedirect\":\"pages_helpRedirect__3CQFO text text_type_main-default\",\"link\":\"pages_link__1KkYQ pl-1 text text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__28JmB\",\"nav\":\"app-header_nav__3HvHD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_nav\":\"nav-list_main_nav__33XRD\",\"nested_nav\":\"nav-list_nested_nav__VXxdO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__2RPLZ\",\"close_btn\":\"modal_close_btn__zO7Bt mr-10\",\"close_btn_ingredient\":\"modal_close_btn_ingredient__3YzM5 modal_close_btn__zO7Bt mr-10 mt-10\",\"close_btn_order\":\"modal_close_btn_order__2yIJA modal_close_btn__zO7Bt mr-10 mt-15\",\"close_btn_orderInfo\":\"modal_close_btn_orderInfo__2Vsoe modal_close_btn__zO7Bt mr-10 mt-10\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerIngredient\":\"burger-constructor-item_burgerIngredient__G0IIR\",\"dragIcon\":\"burger-constructor-item_dragIcon__Oyde4\",\"dragPreview\":\"burger-constructor-item_dragPreview__1Evvb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonsArea\":\"profile-settings_buttonsArea__tvk-v\",\"buttonSeparator\":\"profile-settings_buttonSeparator__2m6CN mr-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"price\":\"price_price__2rzLo pt-1 pb-1\",\"price_num\":\"price_price_num__3h9Nt pr-1 text text_type_digits-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientContainer\":\"ingredient-icon-round_ingredientContainer__3xYVr\",\"ingredientImg\":\"ingredient-icon-round_ingredientImg__3mktB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"feed-info_label__3eMH- text text_type_main-medium\",\"value\":\"feed-info_value__1hW61 text text_type_digits-large\"};"],"sourceRoot":""}